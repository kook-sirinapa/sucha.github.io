if (self.CavalryLogger) { CavalryLogger.start_js(["vC8Nn"]); }

__d("CometUFICommentList_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},b=[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}];return{kind:"Fragment",name:"CometUFICommentList_feedback",type:"Feedback",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"includeHighlightedComments",type:"Boolean!",defaultValue:!1},{kind:"LocalArgument",name:"includeNestedComments",type:"Boolean!",defaultValue:!0},{kind:"LocalArgument",name:"isInitialFetch",type:"Boolean!",defaultValue:!0},{kind:"RootArgument",name:"useDefaultActor",type:"Boolean"}],selections:[a,{kind:"ScalarField",alias:null,name:"can_viewer_comment",args:b,storageKey:null},{kind:"ScalarField",alias:null,name:"comment_composer_placeholder",args:null,storageKey:null},{kind:"LinkedField",alias:"comment_count",name:"top_level_comments",storageKey:null,args:null,concreteType:"TopLevelCommentsConnection",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"total_count",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"viewer_actor",storageKey:null,args:b,concreteType:null,plural:!1,selections:[a]},{kind:"FragmentSpread",name:"CometUFIComment_feedback",args:null},{kind:"FragmentSpread",name:"CometUFICommentsProvider_feedback",args:[{kind:"Variable",name:"includeHighlightedComments",variableName:"includeHighlightedComments"},{kind:"Variable",name:"includeNestedComments",variableName:"includeNestedComments"},{kind:"Variable",name:"isInitialFetch",variableName:"isInitialFetch"}]},{kind:"FragmentSpread",name:"CometUFIComposer_feedback",args:null},{kind:"FragmentSpread",name:"CometUFICommentEditor_feedback",args:null}]}}();e.exports=a}),null);
__d("CometUFICommentsProviderPaginationQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"after",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"before",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"commentProfilePictureSizeDepth0",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"commentProfilePictureSizeDepth1",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"displayCommentsFeedbackContext",type:"String",defaultValue:null},{kind:"LocalArgument",name:"displayCommentsContextEnableComment",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"displayCommentsContextIsAdPreview",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"displayCommentsContextIsStorySet",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"feedLocation",type:"FBFeedLocation",defaultValue:null},{kind:"LocalArgument",name:"feedbackID",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"feedbackSource",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"focusCommentID",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"includeHighlightedComments",type:"Boolean",defaultValue:!1},{kind:"LocalArgument",name:"includeNestedComments",type:"Boolean",defaultValue:!0},{kind:"LocalArgument",name:"isInitialFetch",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"isPaginating",type:"Boolean",defaultValue:!0},{kind:"LocalArgument",name:"isComet",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"containerIsFeedStory",type:"Boolean",defaultValue:!0},{kind:"LocalArgument",name:"containerIsWorkplace",type:"Boolean",defaultValue:!1},{kind:"LocalArgument",name:"containerIsLiveStory",type:"Boolean",defaultValue:!1},{kind:"LocalArgument",name:"containerIsTahoe",type:"Boolean",defaultValue:!1},{kind:"LocalArgument",name:"last",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"scale",type:"Float",defaultValue:null},{kind:"LocalArgument",name:"topLevelViewOption",type:"CommentOrderingMode",defaultValue:null},{kind:"LocalArgument",name:"useDefaultActor",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"viewOption",type:"CommentOrderingMode",defaultValue:null},{kind:"LocalArgument",name:"UFI2CommentsProvider_commentsKey",type:"String",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"feedbackID"}],c={kind:"Variable",name:"after",variableName:"after"},d={kind:"Variable",name:"before",variableName:"before"},e={kind:"Variable",name:"first",variableName:"first"},f={kind:"Variable",name:"last",variableName:"last"},g={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},h={kind:"ScalarField",alias:null,name:"subscription_target_id",args:null,storageKey:null},i={kind:"Variable",name:"feed_context_enable_comment",variableName:"displayCommentsContextEnableComment"},j={kind:"Variable",name:"feed_context_fb_feed_location",variableName:"feedLocation"},k={kind:"Variable",name:"feed_context_is_ad_preview",variableName:"displayCommentsContextIsAdPreview"},l={kind:"Variable",name:"feed_context_is_aggregated_share",variableName:"displayCommentsContextIsAggregatedShare"},m={kind:"Variable",name:"feed_context_is_story_set",variableName:"displayCommentsContextIsStorySet"},n={kind:"Variable",name:"feedback_context",variableName:"displayCommentsFeedbackContext"},o={kind:"Variable",name:"feedback_source",variableName:"feedbackSource"},p={kind:"Variable",name:"focus_comment_id",variableName:"focusCommentID"},q={kind:"Variable",name:"is_initial_fetch",variableName:"isInitialFetch"},aa=[c,d,{kind:"Variable",name:"comment_order",variableName:"viewOption"},i,j,k,l,m,n,o,e,p,q,{kind:"Variable",name:"is_top_level",variableName:"includeNestedComments"},f,{kind:"Variable",name:"top_level_comment_order",variableName:"topLevelViewOption"}],ba={kind:"ScalarField",alias:null,name:"after_count",args:null,storageKey:null},ca={kind:"ScalarField",alias:null,name:"before_count",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null},da={kind:"ScalarField",alias:null,name:"legacy_fbid",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},v={kind:"Variable",name:"scale",variableName:"scale"},w={kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null},x=[w],ea={kind:"LinkedField",alias:"profile_picture_depth_0",name:"profile_picture",storageKey:null,args:[{kind:"Variable",name:"height",variableName:"commentProfilePictureSizeDepth0"},v,{kind:"Variable",name:"width",variableName:"commentProfilePictureSizeDepth0"}],concreteType:"Image",plural:!1,selections:x},y=[{kind:"Variable",name:"height",variableName:"commentProfilePictureSizeDepth1"},v,{kind:"Variable",name:"width",variableName:"commentProfilePictureSizeDepth1"}],fa={kind:"LinkedField",alias:"profile_picture_depth_1",name:"profile_picture",storageKey:null,args:y,concreteType:"Image",plural:!1,selections:x},z={kind:"ScalarField",alias:null,name:"is_verified",args:null,storageKey:null};z={kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:null,plural:!1,selections:[s,g,t,u,ea,fa,{kind:"InlineFragment",type:"User",selections:[z,{kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null}]},{kind:"InlineFragment",type:"Page",selections:[z]}]};var ga={kind:"ScalarField",alias:null,name:"is_author_weak_reference",args:null,storageKey:null},A={kind:"ScalarField",alias:null,name:"created_time",args:null,storageKey:null},ha={kind:"ScalarField",alias:null,name:"spam_display_mode",args:null,storageKey:null},ia={kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[{kind:"LinkedField",alias:"style_type_renderer_comet",name:"style_type_renderer",storageKey:'style_type_renderer(supported:["StoryAttachmentAnimatedImageShareStyleRenderer","StoryAttachmentDonationStyleRenderer","StoryAttachmentFallbackStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentStickerStyleRenderer","StoryAttachmentVideoAutoplayStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentCommentPlaceInfoStyleRenderer","StoryAttachmentChatCommandStyleRenderer"])',args:[{kind:"Literal",name:"supported",value:["StoryAttachmentAnimatedImageShareStyleRenderer","StoryAttachmentDonationStyleRenderer","StoryAttachmentFallbackStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentStickerStyleRenderer","StoryAttachmentVideoAutoplayStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentCommentPlaceInfoStyleRenderer","StoryAttachmentChatCommandStyleRenderer"]}],concreteType:null,plural:!1,selections:[s,{kind:"InlineFragment",type:"StoryAttachmentAnimatedImageShareStyleRenderer",selections:[{kind:"ModuleImport",documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentAnimatedImageShareAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]},{kind:"InlineFragment",type:"StoryAttachmentDonationStyleRenderer",selections:[{kind:"ModuleImport",documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentDonationAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]},{kind:"InlineFragment",type:"StoryAttachmentFallbackStyleRenderer",selections:[{kind:"ModuleImport",documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentFallbackAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]},{kind:"InlineFragment",type:"StoryAttachmentPhotoStyleRenderer",selections:[{kind:"ModuleImport",documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentImageAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]},{kind:"InlineFragment",type:"StoryAttachmentStickerStyleRenderer",selections:[{kind:"ModuleImport",documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentStickerAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]},{kind:"InlineFragment",type:"StoryAttachmentVideoAutoplayStyleRenderer",selections:[{kind:"ModuleImport",documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentVideoAutoplayAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]},{kind:"InlineFragment",type:"StoryAttachmentVideoStyleRenderer",selections:[{kind:"ModuleImport",documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentVideoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]},{kind:"InlineFragment",type:"StoryAttachmentTipJarPaymentStyleRenderer",selections:[{kind:"ModuleImport",documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentTipJarPaymentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]},{kind:"InlineFragment",type:"StoryAttachmentCommentPlaceInfoStyleRenderer",selections:[{kind:"ModuleImport",documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentPlaceInfoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]},{kind:"InlineFragment",type:"StoryAttachmentChatCommandStyleRenderer",selections:[{kind:"ModuleImport",documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentChatCommandAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]}]},{kind:"ScalarField",alias:null,name:"style_list",args:null,storageKey:null}]},B={kind:"Variable",name:"feed_location",variableName:"feedLocation"},C=[B],ja={kind:"ScalarField",alias:null,name:"should_show_comment_menu",args:C,storageKey:null},ka={kind:"ScalarField",alias:null,name:"is_author_banned_by_content_owner",args:null,storageKey:null},la={kind:"ScalarField",alias:null,name:"chat_to_buy",args:null,storageKey:null},ma={kind:"LinkedField",alias:null,name:"comment_parent",storageKey:null,args:null,concreteType:"Comment",plural:!1,selections:[g,{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:null,plural:!1,selections:[s,t,g,{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,name:"first_name",args:null,storageKey:null}]}]}]},na={kind:"LinkedField",alias:null,name:"edit_history",storageKey:null,args:null,concreteType:"EditHistoryConnection",plural:!1,selections:[r]},D=[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}],E={kind:"ScalarField",alias:null,name:"key",args:null,storageKey:null},oa={kind:"LinkedField",alias:null,name:"viewer_feedback_reaction_info",storageKey:null,args:D,concreteType:"FeedbackReactionInfo",plural:!1,selections:[E,g]},F=[s,g],pa={kind:"LinkedField",alias:null,name:"viewer_actor",storageKey:null,args:D,concreteType:null,plural:!1,selections:F},qa={kind:"LinkedField",alias:null,name:"supported_reactions",storageKey:null,args:null,concreteType:"FeedbackReaction",plural:!0,selections:[E]},G=[g],ra={kind:"LinkedField",alias:null,name:"associated_video",storageKey:null,args:null,concreteType:"Video",plural:!1,selections:G};E={kind:"LinkedField",alias:null,name:"top_reactions",storageKey:'top_reactions(orderby:["COUNT_DESC","REACTION_TYPE"])',args:[{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],concreteType:"TopReactionsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"TopReactionsEdge",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"reaction_count",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"FeedbackReactionInfo",plural:!1,selections:[E,g,{kind:"ScalarField",alias:null,name:"reaction_type",args:null,storageKey:null}]}]}]};var sa={kind:"LinkedField",alias:null,name:"reactors",storageKey:null,args:null,concreteType:"ReactorsOfContentConnection",plural:!1,selections:[r,{kind:"ScalarField",alias:null,name:"count_reduced",args:null,storageKey:null}]},H={kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},I={kind:"LinkedField",alias:null,name:"page",storageKey:null,args:null,concreteType:"Page",plural:!1,selections:G},ta={kind:"LinkedField",alias:null,name:"page_private_reply",storageKey:null,args:null,concreteType:"PrivateReplyContext",plural:!1,selections:[H,{kind:"ScalarField",alias:null,name:"permalink",args:null,storageKey:null},I]},ua={kind:"ScalarField",alias:null,name:"can_viewer_react",args:D,storageKey:null},va={kind:"ScalarField",alias:null,name:"comment_composer_placeholder",args:null,storageKey:null};i=[i,j,k,l,m,n,o,p,q,{kind:"Literal",name:"is_top_level",value:!1}];j={kind:"LinkedField",alias:null,name:"highlighted_comments",storageKey:null,args:null,concreteType:"Comment",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:null,plural:!1,selections:[s,t,{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:y,concreteType:"Image",plural:!1,selections:x},g,{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,name:"gender",args:null,storageKey:null}]}]},A,g]};k={kind:"ScalarField",alias:null,name:"comment_order",args:null,storageKey:null};l={kind:"ScalarField",alias:null,name:"is_initially_expanded",args:null,storageKey:null};m={kind:"ScalarField",alias:null,name:"page_size",args:null,storageKey:null};n={kind:"ScalarField",alias:null,name:"reply_comment_order",args:null,storageKey:null};o={kind:"ScalarField",alias:null,name:"should_render_composer_preemptively",args:null,storageKey:null};p={kind:"LinkedField",alias:null,name:"page_admin_actor_info",storageKey:null,args:null,concreteType:"PageAdminActorInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"creator_id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"creator_name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"creator_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"label_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"page_id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profile_uri",args:null,storageKey:null}]};q={kind:"LinkedField",alias:null,name:"parent_feedback",storageKey:null,args:null,concreteType:"Feedback",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"can_viewer_ban_user",args:null,storageKey:null},g,{kind:"LinkedField",alias:null,name:"viewer_acts_as_page",storageKey:null,args:null,concreteType:"Page",plural:!1,selections:G},{kind:"ScalarField",alias:null,name:"share_fbid",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"political_figure_data",storageKey:null,args:null,concreteType:"PoliticalFigureData",plural:!1,selections:[t,{kind:"LinkedField",alias:null,name:"political_office",storageKey:null,args:null,concreteType:"PoliticalOffice",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"generic_title",args:null,storageKey:null},g]},{kind:"LinkedField",alias:null,name:"best_profile",storageKey:null,args:null,concreteType:null,plural:!1,selections:F},g]}]};y={kind:"LinkedField",alias:null,name:"private_reply_context",storageKey:null,args:null,concreteType:"PrivateReplyContext",plural:!1,selections:[I,H]};I=[{kind:"Literal",name:"translation_type",value:"ORIGINAL"}];var J={kind:"ScalarField",alias:null,name:"length",args:null,storageKey:null},K={kind:"ScalarField",alias:null,name:"offset",args:null,storageKey:null},L={kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},M={kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null},N=[L,{kind:"ScalarField",alias:null,name:"scale",args:null,storageKey:null},w,M],O={kind:"LinkedField",alias:null,name:"work_foreign_entity_info",storageKey:null,args:null,concreteType:"WorkForeignEntityInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"type",args:null,storageKey:null}]},P={kind:"ScalarField",alias:null,name:"entity_is_weak_reference",args:null,storageKey:null},Q={kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null};O={kind:"LinkedField",alias:null,name:"preferred_body",storageKey:'preferred_body(translation_type:"ORIGINAL")',args:I,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"translation_type",args:null,storageKey:null},s,{kind:"InlineFragment",type:"TextWithEntities",selections:[{kind:"LinkedField",alias:null,name:"image_ranges",storageKey:null,args:null,concreteType:"ImageAtRange",plural:!0,selections:[J,K,{kind:"LinkedField",alias:null,name:"entity_with_image",storageKey:null,args:null,concreteType:null,plural:!1,selections:[s,{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:N},g]}]},{kind:"LinkedField",alias:null,name:"inline_style_ranges",storageKey:null,args:null,concreteType:"InlineStyleAtRange",plural:!0,selections:[J,K,{kind:"ScalarField",alias:null,name:"inline_style",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"aggregated_ranges",storageKey:null,args:null,concreteType:"AggregatedEntitiesAtRange",plural:!0,selections:[J,K,r,{kind:"LinkedField",alias:null,name:"sample_entities",storageKey:null,args:null,concreteType:null,plural:!0,selections:[s,g,{kind:"InlineFragment",type:"User",selections:[t]}]}]},{kind:"LinkedField",alias:null,name:"ranges",storageKey:null,args:null,concreteType:"EntityAtRange",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"entity",storageKey:null,args:null,concreteType:null,plural:!1,selections:[s,g,{kind:"ScalarField",alias:null,name:"url",args:[{kind:"Literal",name:"site",value:"www"}],storageKey:'url(site:"www")'},{kind:"ScalarField",alias:"profile_url",name:"url",args:null,storageKey:null},{kind:"InlineFragment",type:"ExternalUrl",selections:[{kind:"ScalarField",alias:null,name:"external_url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_skip_redirect",args:null,storageKey:null}]},{kind:"InlineFragment",type:"VideoTimeIndex",selections:[{kind:"ScalarField",alias:null,name:"time_index",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"video",storageKey:null,args:null,concreteType:"Video",plural:!1,selections:G}]},{kind:"InlineFragment",type:"User",selections:[O]},{kind:"InlineFragment",type:"Group",selections:[O,{kind:"ScalarField",alias:null,name:"work_official_status",args:null,storageKey:null}]}]},J,K,s,P]},Q,{kind:"LinkedField",alias:null,name:"delight_ranges",storageKey:null,args:null,concreteType:"DelightAtRange",plural:!0,selections:[s,{kind:"LinkedField",alias:null,name:"campaign",storageKey:null,args:null,concreteType:"TextDelightCampaign",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"delight_styles",storageKey:'delight_styles(delight_surface:"COMMENT")',args:[{kind:"Literal",name:"delight_surface",value:"COMMENT"}],concreteType:"TextDelightStylePair",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"style",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"value",args:null,storageKey:null}]},g]},J,K]}]}]};var wa={kind:"LinkedField",alias:null,name:"translatability_for_viewer",storageKey:null,args:null,concreteType:"PostTranslatability",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"source_dialect_name",args:null,storageKey:null}]},xa={kind:"ScalarField",alias:null,name:"translation_available_for_viewer",args:null,storageKey:null};I={kind:"LinkedField",alias:"body_renderer",name:"preferred_body",storageKey:'preferred_body(translation_type:"ORIGINAL")',args:I,concreteType:null,plural:!1,selections:[s,{kind:"InlineFragment",type:"TextWithEntities",selections:[{kind:"ModuleImport",documentName:"CometUFICommentBody_comment",fragmentName:"CometUFICommentBodyTextWithEntities_textWithEntities",fragmentPropName:"textWithEntities"}]},{kind:"InlineFragment",type:"FBMarkdownCommentBody",selections:[{kind:"ModuleImport",documentName:"CometUFICommentBody_comment",fragmentName:"CometUFICommentBodyComposedTextWithEntities_composedTextWithEntities",fragmentPropName:"composedTextWithEntities"}]}]};var ya={kind:"ScalarField",alias:null,name:"timestamp_in_video",args:null,storageKey:null},za={kind:"ScalarField",alias:null,name:"written_while_video_was_live",args:null,storageKey:null},R={kind:"ScalarField",alias:null,name:"tag_type",args:null,storageKey:null},S={kind:"ScalarField",alias:null,name:"member_id",args:null,storageKey:null},T={kind:"ScalarField",alias:null,name:"group_id",args:null,storageKey:null},Aa={kind:"LinkedField",alias:null,name:"small_icon",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:x},Ba={kind:"LinkedField",alias:null,name:"group_comment_info",storageKey:null,args:null,concreteType:"GroupCommentInfo",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"author_member_badges",storageKey:null,args:[B,{kind:"Literal",name:"is_comet",value:!0}],concreteType:"RenderableGroupMemberTag",plural:!0,selections:[R,S,T,Aa]},{kind:"ModuleImport",documentName:"CometUFICommentActorLink_comment",fragmentName:"CometUFIGroupCommentActorLink_groupCommentInfo",fragmentPropName:"groupCommentInfo"}]},Ca={kind:"ScalarField",alias:null,name:"has_constituent_badge",args:null,storageKey:null},Da={kind:"ScalarField",alias:null,name:"can_see_constituent_badge_upsell",args:null,storageKey:null},Ea={kind:"ScalarField",alias:null,name:"legacy_token",args:null,storageKey:null},Fa={kind:"LinkedField",alias:null,name:"identity_badges_web",storageKey:null,args:C,concreteType:"IdentityBadge",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"badge_asset",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"multiple_badge_asset",args:null,storageKey:null},Q,{kind:"ScalarField",alias:null,name:"information_title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"information_asset",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"information_description",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"identity_badge_type",args:null,storageKey:null}]};C={kind:"ScalarField",alias:null,name:"can_show_multiple_identity_badges",args:C,storageKey:null};var Ga={kind:"ScalarField",alias:null,name:"can_viewer_disable_preview",args:null,storageKey:null},Ha={kind:"ScalarField",alias:null,name:"is_hidden_by_content_owner",args:null,storageKey:null},U=[v];N={kind:"LinkedField",alias:null,name:"inline_survey_config",storageKey:null,args:null,concreteType:"InlineSurveyStoryActionLink",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"favicon",storageKey:null,args:U,concreteType:"Image",plural:!1,selections:N},{kind:"ScalarField",alias:null,name:"followup_choices",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"followup_question",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"main_choices",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"main_question",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"privacy_text",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"session_blob",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"thankyou_text",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tessa_survey_config_id",args:null,storageKey:null},{kind:"ModuleImport",documentName:"CometUFIComment_comment",fragmentName:"CometUFICommentQualitySurvey_inlineSurveyConfig",fragmentPropName:"inlineSurveyConfig"}]};var Ia={kind:"LinkedField",alias:null,name:"attached_story",storageKey:null,args:null,concreteType:"Story",plural:!1,selections:F};F={kind:"LinkedField",alias:null,name:"body",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[Q,{kind:"LinkedField",alias:null,name:"ranges",storageKey:null,args:null,concreteType:"EntityAtRange",plural:!0,selections:[s,{kind:"LinkedField",alias:null,name:"entity",storageKey:null,args:null,concreteType:null,plural:!1,selections:F},P,J,K]}]};P={kind:"ScalarField",alias:null,name:"is_markdown_enabled",args:null,storageKey:null};var Ja={kind:"ScalarField",alias:"flat_threading_depth",name:"depth",args:null,storageKey:null},Ka={kind:"ClientExtension",selections:[{kind:"ScalarField",alias:null,name:"optimistic_action",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"optimistic_error_code",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"optimistic_error",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_created_from_subscription",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_locally_composed",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"client_id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"reply_comment_parent_fbid",args:null,storageKey:null}]},V=[Q],La={kind:"LinkedField",alias:null,name:"source",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:V},W={kind:"Literal",name:"height",value:396},X={kind:"Literal",name:"width",value:396},Y=[L,w,M],Z={kind:"ScalarField",alias:null,name:"animated_image_attribution",args:null,storageKey:null},$={kind:"LinkedField",alias:null,name:"objectionable_content_info",storageKey:null,args:null,concreteType:"ObjectionableContentInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"categories",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"strings",storageKey:null,args:null,concreteType:"ObjectionableContentWarningScreenText",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"blur_subtitle",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"blur_title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"cover_media_link",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"learn_more_desc",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"learn_more_uri",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"show_media_desc",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"uncover_media_link",args:null,storageKey:null}]}]};w=[w,M,L];W={kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:!1,selections:[s,{kind:"LinkedField",alias:"gifAnimatedImage_396",name:"animated_image",storageKey:null,args:[W,{kind:"Literal",name:"media_type",value:"image/gif"},v,X],concreteType:"Image",plural:!1,selections:Y},{kind:"LinkedField",alias:"image_396",name:"image",storageKey:null,args:[W,v,{kind:"Literal",name:"sizing",value:"contain-fit"},X],concreteType:"Image",plural:!1,selections:Y},{kind:"LinkedField",alias:"webPAnimatedImage_396",name:"animated_image",storageKey:null,args:[W,{kind:"Literal",name:"media_type",value:"image/webp"},v,X],concreteType:"Image",plural:!1,selections:Y},g,{kind:"LinkedField",alias:"fallback_image",name:"image",storageKey:null,args:[{kind:"Literal",name:"height",value:98},v,{kind:"Literal",name:"width",value:98}],concreteType:"Image",plural:!1,selections:Y},{kind:"ScalarField",alias:null,name:"is_playable",args:null,storageKey:null},{kind:"InlineFragment",type:"Video",selections:[Z,$,M,L,{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:x},{kind:"ScalarField",alias:null,name:"original_height",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"original_width",args:null,storageKey:null},{kind:"Condition",passingValue:!0,condition:"isComet",selections:[{kind:"ScalarField",alias:null,name:"playable_url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"broadcaster_origin",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"broadcast_status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_live_streaming",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_looping",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"loop_count",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_spherical",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permalink_url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"captions_url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"dash_prefetch_experimental",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_use_oz",args:null,storageKey:null},{kind:"ScalarField",alias:"playable_url_dash",name:"playable_url",args:[{kind:"Literal",name:"scrubbing_preference",value:"MPEG_DASH"}],storageKey:'playable_url(scrubbing_preference:"MPEG_DASH")'},{kind:"ScalarField",alias:null,name:"dash_manifest",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"min_quality_preference",args:null,storageKey:null},{kind:"ScalarField",alias:"playable_url_quality_hd",name:"playable_url",args:[{kind:"Literal",name:"quality",value:"HD"}],storageKey:'playable_url(quality:"HD")'},{kind:"ScalarField",alias:null,name:"autoplay_gating_result",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewer_autoplay_setting",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_autoplay",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"drm_info",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"captions_settings",storageKey:null,args:null,concreteType:"CaptionsSettings",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"always_show_captions",args:null,storageKey:null},g]},{kind:"LinkedField",alias:null,name:"instream_video_ad_breaks_comet",storageKey:null,args:null,concreteType:"InstreamVideoAdBreaks",plural:!1,selections:[{kind:"ModuleImport",documentName:"VideoPlayerRelay_video",fragmentName:"InstreamVideoAdBreaksPlayer_adBreaks",fragmentPropName:"adBreaks"}]}]}]},{kind:"InlineFragment",type:"GenericAttachmentMedia",selections:[Z]},{kind:"InlineFragment",type:"Photo",selections:[$,{kind:"ScalarField",alias:null,name:"accessibility_caption",args:null,storageKey:null},{kind:"LinkedField",alias:"massive_image",name:"image",storageKey:null,args:U,concreteType:"Image",plural:!1,selections:[M,L]},{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:[{kind:"Literal",name:"height",value:210},v,{kind:"Literal",name:"width",value:260}],concreteType:"Image",plural:!1,selections:w}]}]};X=[{kind:"LinkedField",alias:null,name:"address",storageKey:null,args:null,concreteType:"StreetAddress",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"single_line_full_address",args:null,storageKey:null}]},g,t,{kind:"LinkedField",alias:null,name:"location",storageKey:null,args:null,concreteType:"Location",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"latitude",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"longitude",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"overall_rating",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"price_range_description",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:"profile_picture(size__height:60,size__width:60)",args:[{kind:"Literal",name:"size__height",value:60},{kind:"Literal",name:"size__width",value:60}],concreteType:"Image",plural:!1,selections:x},{kind:"ScalarField",alias:null,name:"top_category_name",args:null,storageKey:null},u];Y={kind:"LinkedField",alias:null,name:"target",storageKey:null,args:null,concreteType:null,plural:!1,selections:[s,g,{kind:"InlineFragment",type:"CommentPlaceInfo",selections:[{kind:"ScalarField",alias:null,name:"can_viewer_add_to_attachment",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_remove_from_attachment",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_add_suggested_to_attachment",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_remove_suggested_from_attachment",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_curate_attachment",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"pending_places_for_attachment",storageKey:null,args:null,concreteType:"Page",plural:!0,selections:X},{kind:"LinkedField",alias:null,name:"place_list_items",storageKey:null,args:null,concreteType:"CommentPlaceInfoToPlaceListItemsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"PlaceListItem",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"recommendation_page",storageKey:null,args:null,concreteType:"Page",plural:!1,selections:X},g]}]}]},{kind:"InlineFragment",type:"ExternalUrl",selections:[u]}]};Z={kind:"LinkedField",alias:null,name:"style_infos",storageKey:null,args:null,concreteType:null,plural:!0,selections:[s,{kind:"InlineFragment",type:"FundraiserForStoryDonationAttachmentStyleInfo",selections:[{kind:"LinkedField",alias:null,name:"donation_comment_text",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"ranges",storageKey:null,args:null,concreteType:"EntityAtRange",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"entity",storageKey:null,args:null,concreteType:null,plural:!1,selections:[s,u,g]},J,K]},Q]}]}]};$={kind:"LinkedField",alias:null,name:"title_with_entities",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:V};U={kind:"LinkedField",alias:null,name:"action_links",storageKey:null,args:null,concreteType:null,plural:!0,selections:[s,{kind:"InlineFragment",type:"ArticleContextActionLink",selections:[{kind:"ScalarField",alias:null,name:"object_id",args:null,storageKey:null}]}]};M={kind:"ScalarField",alias:null,name:"tracking",args:null,storageKey:null};L=[t,g];X=[{kind:"Literal",name:"height",value:80},v,{kind:"Literal",name:"width",value:80}];J={kind:"LinkedField",alias:"sticker",name:"media",storageKey:null,args:null,concreteType:null,plural:!1,selections:[s,g,{kind:"InlineFragment",type:"Sticker",selections:[{kind:"ScalarField",alias:null,name:"frame_count",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"frame_rate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"frames_per_column",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"frames_per_row",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"label",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"pack",storageKey:null,args:null,concreteType:"StickerPack",plural:!1,selections:L},{kind:"LinkedField",alias:null,name:"sprite_image",storageKey:null,args:X,concreteType:"Image",plural:!1,selections:x},{kind:"LinkedField",alias:"sticker_image",name:"image",storageKey:null,args:X,concreteType:"Image",plural:!1,selections:w},{kind:"LinkedField",alias:"larger_sticker_image",name:"image",storageKey:null,args:[{kind:"Literal",name:"height",value:120},v,{kind:"Literal",name:"width",value:120}],concreteType:"Image",plural:!1,selections:w},{kind:"ScalarField",alias:null,name:"sticker_type",args:null,storageKey:null}]}]};K={kind:"LinkedField",alias:null,name:"parent_post_story",storageKey:null,args:null,concreteType:"Story",plural:!1,selections:G};Q=[{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[u,La,W,Y,Z,$,U,M,J,{kind:"LinkedField",alias:"style_type_renderer_blue",name:"style_type_renderer",storageKey:'style_type_renderer(supported:["StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentChatCommandStyleRenderer"])',args:[{kind:"Literal",name:"supported",value:["StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentChatCommandStyleRenderer"]}],concreteType:null,plural:!1,selections:[s,{kind:"InlineFragment",type:"StoryAttachmentTipJarPaymentStyleRenderer",selections:[{kind:"ModuleImport",documentName:"UFI2CommentLazyLoadAttachmentContainer_attachment",fragmentName:"UFI2CommentTipJarPaymentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]},{kind:"InlineFragment",type:"StoryAttachmentChatCommandStyleRenderer",selections:[{kind:"ModuleImport",documentName:"UFI2CommentLazyLoadAttachmentContainer_attachment",fragmentName:"UFI2CommentChatCommandAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer"}]}]}]},K,{kind:"LinkedField",alias:null,name:"group_comment_info",storageKey:null,args:null,concreteType:"GroupCommentInfo",plural:!1,selections:[{kind:"LinkedField",alias:"legacy_author_member_badges",name:"author_member_badges",storageKey:null,args:[B,{kind:"Literal",name:"is_comet",value:!1}],concreteType:"RenderableGroupMemberTag",plural:!0,selections:[R,S,T,{kind:"ScalarField",alias:null,name:"argb_background_color",args:null,storageKey:null},u,{kind:"ScalarField",alias:null,name:"dialog_url",args:null,storageKey:null},Aa]}]}];V={kind:"Condition",passingValue:!0,condition:"containerIsFeedStory",selections:Q};x={kind:"Condition",passingValue:!0,condition:"containerIsLiveStory",selections:Q};X={kind:"Condition",passingValue:!0,condition:"containerIsTahoe",selections:Q};v={kind:"Condition",passingValue:!0,condition:"containerIsWorkplace",selections:[{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[u,La,W,Y,Z,$,U,M,J]},K,{kind:"ScalarField",alias:null,name:"is_author_non_coworker",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_author_bot",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_author_original_poster",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"synced_intern_qa_answer",storageKey:null,args:null,concreteType:"InternQASyncedAnswerData",plural:!1,selections:[H,{kind:"ScalarField",alias:null,name:"activity_uri",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"last_editor",storageKey:null,args:null,concreteType:"User",plural:!1,selections:L}]}]};w={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null};B={kind:"LinkedField",alias:null,name:"page_info",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"end_cursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_next_page",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_previous_page",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"start_cursor",args:null,storageKey:null}]};R={kind:"ClientExtension",selections:[{kind:"ScalarField",alias:null,name:"ufi2_connection_generation",args:null,storageKey:null}]};S=["feedback_source","focus_comment_id","comment_order"];T={kind:"Variable",name:"__dynamicKey",variableName:"UFI2CommentsProvider_commentsKey"};return{kind:"Request",fragment:{kind:"Fragment",name:"CometUFICommentsProviderPaginationQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:b,concreteType:"Feedback",plural:!1,selections:[{kind:"FragmentSpread",name:"CometUFICommentsProvider_feedback",args:[c,d,e,{kind:"Variable",name:"includeHighlightedComments",variableName:"includeHighlightedComments"},{kind:"Variable",name:"includeNestedComments",variableName:"includeNestedComments"},{kind:"Variable",name:"isInitialFetch",variableName:"isInitialFetch"},{kind:"Variable",name:"isPaginating",variableName:"isPaginating"},f,{kind:"Variable",name:"topLevelViewOption",variableName:"topLevelViewOption"},{kind:"Variable",name:"viewOption",variableName:"viewOption"}]}]}]},operation:{kind:"Operation",name:"CometUFICommentsProviderPaginationQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:b,concreteType:"Feedback",plural:!1,selections:[g,h,{kind:"LinkedField",alias:null,name:"display_comments",storageKey:null,args:aa,concreteType:"DisplayCommentsConnection",plural:!1,selections:[ba,ca,r,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"DisplayCommentsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Comment",plural:!1,selections:[g,da,z,ga,A,ha,ia,ja,ka,la,ma,na,{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:null,concreteType:"Feedback",plural:!1,selections:[g,oa,pa,qa,ra,E,sa,ta,ua,va,{kind:"Condition",passingValue:!0,condition:"includeNestedComments",selections:[{kind:"ScalarField",alias:null,name:"can_viewer_comment",args:D,storageKey:null},{kind:"LinkedField",alias:"comment_count",name:"top_level_comments",storageKey:null,args:null,concreteType:"TopLevelCommentsConnection",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"total_count",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"viewer_actor",storageKey:null,args:D,concreteType:null,plural:!1,selections:[s,t,u,ea,fa]},{kind:"LinkedField",alias:null,name:"associated_group",storageKey:null,args:null,concreteType:"Group",plural:!1,selections:G},h,{kind:"LinkedField",alias:null,name:"display_comments",storageKey:null,args:i,concreteType:"DisplayCommentsConnection",plural:!1,selections:[j,k,l,m,n,o,ba,ca,r,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"DisplayCommentsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Comment",plural:!1,selections:[g,da,z,ga,A,ha,ia,ja,ka,la,ma,na,{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:null,concreteType:"Feedback",plural:!1,selections:[g,oa,pa,qa,ra,E,sa,ta,ua,va]},p,q,y,O,wa,xa,u,I,ya,za,Ba,Ca,Da,Ea,Fa,C,Ga,Ha,N,Ia,F,P,Ja,s,Ka,V,x,X,v]},w]},B,R]},{kind:"LinkedHandle",alias:null,name:"display_comments",args:i,handle:"ufi2_comments",key:"UFI2CommentsProvider_feedback_display_comments",filters:S,dynamicKey:T}]}]},p,q,y,O,wa,xa,u,I,ya,za,Ba,Ca,Da,Ea,Fa,C,Ga,Ha,N,Ia,F,P,Ja,s,Ka,V,x,X,v]},w]},B,{kind:"Condition",passingValue:!0,condition:"includeHighlightedComments",selections:[j]},{kind:"Condition",passingValue:!1,condition:"isPaginating",selections:[k,l,m,n,o,R]}]},{kind:"LinkedHandle",alias:null,name:"display_comments",args:aa,handle:"ufi2_comments",key:"UFI2CommentsProvider_feedback_display_comments",filters:S,dynamicKey:T}]}]},params:{operationKind:"query",name:"CometUFICommentsProviderPaginationQuery",id:"4022889094418423",text:null,metadata:{}}}}();e.exports=a}),null);
__d("CometUFICommentsProviderReadCommentsPageQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"after",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"before",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"displayCommentsFeedbackContext",type:"String",defaultValue:null},{kind:"LocalArgument",name:"displayCommentsContextEnableComment",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"displayCommentsContextIsAdPreview",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"displayCommentsContextIsStorySet",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"feedLocation",type:"FBFeedLocation",defaultValue:null},{kind:"LocalArgument",name:"feedbackID",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"feedbackSource",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"focusCommentID",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"includeNestedComments",type:"Boolean",defaultValue:!0},{kind:"LocalArgument",name:"isInitialFetch",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"last",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"topLevelViewOption",type:"CommentOrderingMode",defaultValue:null},{kind:"LocalArgument",name:"viewOption",type:"CommentOrderingMode",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"feedbackID"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"LinkedField",alias:null,name:"display_comments",storageKey:null,args:[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"before",variableName:"before"},{kind:"Variable",name:"comment_order",variableName:"viewOption"},{kind:"Variable",name:"feed_context_enable_comment",variableName:"displayCommentsContextEnableComment"},{kind:"Variable",name:"feed_context_fb_feed_location",variableName:"feedLocation"},{kind:"Variable",name:"feed_context_is_ad_preview",variableName:"displayCommentsContextIsAdPreview"},{kind:"Variable",name:"feed_context_is_aggregated_share",variableName:"displayCommentsContextIsAggregatedShare"},{kind:"Variable",name:"feed_context_is_story_set",variableName:"displayCommentsContextIsStorySet"},{kind:"Variable",name:"feedback_context",variableName:"displayCommentsFeedbackContext"},{kind:"Variable",name:"feedback_source",variableName:"feedbackSource"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"focus_comment_id",variableName:"focusCommentID"},{kind:"Variable",name:"is_initial_fetch",variableName:"isInitialFetch"},{kind:"Variable",name:"is_top_level",variableName:"includeNestedComments"},{kind:"Variable",name:"last",variableName:"last"},{kind:"Variable",name:"top_level_comment_order",variableName:"topLevelViewOption"}],concreteType:"DisplayCommentsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"DisplayCommentsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Comment",plural:!1,selections:[c]}]}]};return{kind:"Request",fragment:{kind:"Fragment",name:"CometUFICommentsProviderReadCommentsPageQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:b,concreteType:"Feedback",plural:!1,selections:[d]}]},operation:{kind:"Operation",name:"CometUFICommentsProviderReadCommentsPageQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:b,concreteType:"Feedback",plural:!1,selections:[d,c]}]},params:{operationKind:"query",name:"CometUFICommentsProviderReadCommentsPageQuery",id:"3550071361673516",text:null,metadata:{}}}}();e.exports=a}),null);
__d("CometUFICommentsProvider_displayCommentsHighlightedComments.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"CometUFICommentsProvider_displayCommentsHighlightedComments"};e.exports=a}),null);
__d("CometUFICommentsProvider_displayCommentsMetadata.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"CometUFICommentsProvider_displayCommentsMetadata"};e.exports=a}),null);
__d("CometUFICommentsProvider_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"created_time",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"is_created_from_subscription",args:null,storageKey:null},e={kind:"ScalarField",alias:null,name:"is_locally_composed",args:null,storageKey:null};return{kind:"Fragment",name:"CometUFICommentsProvider_feedback",type:"Feedback",metadata:{connection:[{count:null,cursor:null,direction:"bidirectional",path:["display_comments"]}]},argumentDefinitions:[{kind:"LocalArgument",name:"after",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"before",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"last",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"includeHighlightedComments",type:"Boolean!",defaultValue:!1},{kind:"LocalArgument",name:"includeNestedComments",type:"Boolean!",defaultValue:!0},{kind:"LocalArgument",name:"isInitialFetch",type:"Boolean!",defaultValue:!0},{kind:"LocalArgument",name:"isPaginating",type:"Boolean!",defaultValue:!1},{kind:"LocalArgument",name:"topLevelViewOption",type:"CommentOrderingMode",defaultValue:null},{kind:"LocalArgument",name:"viewOption",type:"CommentOrderingMode",defaultValue:null},{kind:"LocalArgument",name:"__false",type:"Boolean!",defaultValue:!1},{kind:"LocalArgument",name:"__true",type:"Boolean!",defaultValue:!0},{kind:"RootArgument",name:"displayCommentsContextEnableComment",type:"Boolean"},{kind:"RootArgument",name:"feedLocation",type:"FBFeedLocation"},{kind:"RootArgument",name:"displayCommentsContextIsAdPreview",type:"Boolean"},{kind:"RootArgument",name:"displayCommentsContextIsAggregatedShare",type:"Boolean"},{kind:"RootArgument",name:"displayCommentsContextIsStorySet",type:"Boolean"},{kind:"RootArgument",name:"displayCommentsFeedbackContext",type:"String"},{kind:"RootArgument",name:"feedbackSource",type:"Int"},{kind:"RootArgument",name:"focusCommentID",type:"ID"},{kind:"RootArgument",name:"UFI2CommentsProvider_commentsKey",type:"String"}],selections:[a,{kind:"ScalarField",alias:null,name:"subscription_target_id",args:null,storageKey:null},{kind:"LinkedField",alias:"display_comments",name:"__UFI2CommentsProvider_feedback_display_comments_ufi2_comments",storageKey:null,args:[{kind:"Variable",name:"__dynamicKey",variableName:"UFI2CommentsProvider_commentsKey"},{kind:"Variable",name:"comment_order",variableName:"viewOption"},{kind:"Variable",name:"feedback_source",variableName:"feedbackSource"},{kind:"Variable",name:"focus_comment_id",variableName:"focusCommentID"}],concreteType:"DisplayCommentsConnection",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"after_count",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"before_count",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"DisplayCommentsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Comment",plural:!1,selections:[a,{kind:"ScalarField",alias:null,name:"legacy_fbid",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:null,plural:!1,selections:[b,a,{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"is_author_weak_reference",args:null,storageKey:null},c,{kind:"ScalarField",alias:null,name:"spam_display_mode",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:null,concreteType:"Feedback",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"comment_composer_placeholder",args:null,storageKey:null},{kind:"Condition",passingValue:!0,condition:"includeNestedComments",selections:[{kind:"FragmentSpread",name:"CometUFICommentList_feedback",args:[{kind:"Variable",name:"includeHighlightedComments",variableName:"__true"},{kind:"Variable",name:"includeNestedComments",variableName:"__false"},{kind:"Variable",name:"isInitialFetch",variableName:"isInitialFetch"}]}]}]},{kind:"LinkedField",alias:null,name:"inline_survey_config",storageKey:null,args:null,concreteType:"InlineSurveyStoryActionLink",plural:!1,selections:[{kind:"FragmentSpread",name:"UFI2CommentQualitySurvey_inlineSurveyConfig",args:null}]},{kind:"ScalarField",alias:"flat_threading_depth",name:"depth",args:null,storageKey:null},b,{kind:"FragmentSpread",name:"CometUFIComment_comment",args:null},{kind:"FragmentSpread",name:"CometUFICommentEditor_comment",args:null},{kind:"InlineDataFragmentSpread",name:"isCometCommentFresh_comment",selections:[c,{kind:"ClientExtension",selections:[d,e]}]},{kind:"FragmentSpread",name:"UFI2CommentActorLink_comment",args:null},{kind:"FragmentSpread",name:"UFI2CommentActorLinkBadgesDynamic_comment",args:null},{kind:"FragmentSpread",name:"UFI2CommentQualitySurvey_comment",args:null},{kind:"ClientExtension",selections:[{kind:"ScalarField",alias:null,name:"client_id",args:null,storageKey:null},e,d,{kind:"ScalarField",alias:null,name:"optimistic_action",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"optimistic_error",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"reply_comment_parent_fbid",args:null,storageKey:null}]}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"page_info",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"end_cursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_next_page",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_previous_page",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"start_cursor",args:null,storageKey:null}]},{kind:"Condition",passingValue:!0,condition:"includeHighlightedComments",selections:[{kind:"InlineDataFragmentSpread",name:"CometUFICommentsProvider_displayCommentsHighlightedComments",selections:[{kind:"LinkedField",alias:null,name:"highlighted_comments",storageKey:null,args:null,concreteType:"Comment",plural:!0,selections:[{kind:"FragmentSpread",name:"CometUFIRepliesExpander_highlightedComments",args:null}]}]}]},{kind:"Condition",passingValue:!1,condition:"isPaginating",selections:[{kind:"InlineDataFragmentSpread",name:"CometUFICommentsProvider_displayCommentsMetadata",selections:[{kind:"ScalarField",alias:null,name:"comment_order",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_initially_expanded",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"page_size",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"reply_comment_order",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"should_render_composer_preemptively",args:null,storageKey:null},{kind:"ClientExtension",selections:[{kind:"ScalarField",alias:null,name:"ufi2_connection_generation",args:null,storageKey:null}]}]}]}]}]}}();e.exports=a}),null);
__d("CometUFICommentListState",["ErrorNormalizeUtils","FBLogger","UFI2ViewOption","gkx","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var b=a.count,c=a.direction,d=a.error,e=a.hasMore,f=a.isLoading,g=a.pageSize;a=a.totalCount;if(a!=null&&a===0)return null;if(b===0)return null;return!e?null:{__type:"PAGER",count:Math.min(b,g),direction:c,status:{error:d,pending:f}}}function h(a){var b=a.count,c=a.expanded;a=a.minCountToShowCollapser;if(!c)return null;if(a==null)return null;return b<=a?null:{__type:"REPLIES_COLLAPSER",count:b}}function i(a){var b=a.error,c=a.expanded,d=a.isLoading;a=a.totalCount;return c||a===0?null:{__type:"REPLIES_EXPANDER",count:a,status:{error:b,pending:d}}}function j(a){var b=a.direction;a=a.page;if(b==="forward"){b=Math.max(0,a.afterCount-1);return babelHelpers["extends"]({},a,{afterCount:b,hasNext:b>0})}b=Math.max(0,a.beforeCount-1);return babelHelpers["extends"]({},a,{beforeCount:b,hasPrevious:b>0})}function k(a,c){var d=l(a,c);if(a.__type!=="INITIAL_STATE"&&c==null)throw b("unrecoverableViolation")("Expected state not to be null","ufi2");return d}function l(a,c){__p&&__p();if(a.__type==="INITIAL_STATE"){var d,e=a.args,f=e.afterCount,k=e.beforeCount,l=e.canViewerComment,m=e.commentIDs,o=e.commentsByID,r=e.feedbackTargetID,t=e.hasNext,u=e.hasPrevious,v=e.hiddenCommentIDs,w=e.initiallyExpanded,x=e.pageSize,y=e.shouldRenderComposerPreemptively,z=e.topLevelFeedbackTargetID,A=e.totalCount;e=e.viewOption;d={backward:g({count:k,direction:"backward",error:null,hasMore:u,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.backward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:x,totalCount:A}),forward:g({count:f,direction:"forward",error:null,hasMore:t,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.forward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:x,totalCount:A})};var B={};v.forEach(function(a){B[a]="COLLAPSED"});v={canViewerComment:l,commentPages:m.length>0?[{__type:"COMMENTS_PAGE",afterCount:f,beforeCount:k,commentIDs:m,hasNext:t,hasPrevious:u,state:"VISIBLE"}]:[],commentsByID:o,commentsHiddenByViewer:B,expanded:(x=c==null?void 0:c.expanded)!=null?x:w,feedbackTargetID:r,hasPaged:{backward:!1,forward:!1},locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:d,shouldComposerRenderWhenListIsExpanded:y,topLevelFeedbackTargetID:z,viewOption:e};if(a.args.depth===0)return babelHelpers["extends"]({},v,{__type:"DEPTH_0",status:{error:null,pending:!1}});l=a.args.minCountToShowCollapser;f=null;c!=null&&c.__type==="DEPTH_1"&&(f=c.repliesExpander);return babelHelpers["extends"]({},v,{__type:"DEPTH_1",repliesCollapser:h({count:m.length,expanded:w,minCountToShowCollapser:l}),repliesExpander:i({error:null,expanded:(k=c==null?void 0:c.expanded)!=null?k:w,isLoading:(o=(t=f)==null?void 0:(u=t.status)==null?void 0:u.pending)!=null?o:!1,totalCount:A})})}if(c==null)throw b("unrecoverableViolation")("Expected state not to be null","ufi2");switch(a.__type){case"COLLAPSE_LIST":x=a.args;r=x.depth;d=x.totalCount;if(c.expanded===!1)return c;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{expanded:!1});y=s.getCommentsCount({depth:r,state:c})===0;z=d>0&&y===!0;z&&b("FBLogger")("ufi2").warn("UFI2CommentsListState.updater(...): COLLAPSE_LIST: expected list not to be empty if connection is not empty");return babelHelpers["extends"]({},c,{expanded:!1,repliesCollapser:null,repliesExpander:i({error:c.repliesExpander?c.repliesExpander.status.error:null,expanded:!1,isLoading:!1,totalCount:d})});case"DELETE_COMMENT":e=a.args;var C=e.commentID;v=e.depth;m=c.commentPages;l=c.locallyComposedCommentIDs;var D=c.newCommentsPage;if(m.length===0&&D.commentIDs.length===0)return c;k=D.commentIDs.filter(function(a){return a!==C});w=s.getVisibleCommentsCount({depth:v,state:c});f=k.length<D.commentIDs.length;if(f){var E={};k.forEach(function(a){E[a]=D.visibleStates[a]});t=babelHelpers["extends"]({},D,{commentIDs:k,visibleStates:E});u=m.map(function(a){return j({direction:"backward",page:a})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:u,newCommentsPage:t});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");o=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:u,newCommentsPage:t,repliesCollapser:h({count:w-1,expanded:c.expanded,minCountToShowCollapser:o})})}var F=null,G=!1;A=m.map(function(a,b){__p&&__p();if(G)return j({direction:"backward",page:a});var c=a.commentIDs.filter(function(a){return a!==C});if(c.length<a.commentIDs.length){G=!0;F=b;return babelHelpers["extends"]({},a,{commentIDs:c})}return a}).map(function(a,b){return a&&F!=null&&b<F?j({direction:"forward",page:a}):a}).filter(Boolean);if(G===!1){b("FBLogger")("ufi2").warn("CometUFICommentListState.updater(...): Tried deleting a comment that isnt present");return c}x=l.filter(function(a){return a!==C});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:A,locallyComposedCommentIDs:x});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:A,locallyComposedCommentIDs:x,repliesCollapser:h({count:w-1,expanded:c.expanded,minCountToShowCollapser:a.args.minCountToShowCollapser})});case"EXPAND_HIDDEN_COMMENTS":r=a.args.commentIDs;var ba=c.commentsHiddenByViewer,H=babelHelpers["extends"]({},ba);r.forEach(function(a){var c=ba[a];if(c==null){b("FBLogger")("ufi2").warn("CometUFICommentListState.updater(...): Tried expanding a comment that is not hidden");return}c==="COLLAPSED"&&(H[a]="EXPANDED")});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:H}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:H});case"EXPAND_LIST":y=a.args;z=y.depth;d=y.totalCount;e=c.commentPages;v=c.newCommentsPage;if(c.expanded===!0&&c.shouldComposerRenderWhenListIsExpanded===!0)return c;if(z!==0&&s.isRepliesExpanderLoading({depth:z,state:c}))return c;if(d===0)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:null,repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});f=s.getVisibleCommentsCount({depth:z,state:c});if(f===0){k=s.getCommentsCount({depth:z,state:c})===0;if(k)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0,status:{error:null,pending:!0}}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!1,repliesCollapser:null,repliesExpander:i({error:null,expanded:!1,isLoading:!0,totalCount:d})});u=e.length>0?e[0]:null;t=u!=null?[babelHelpers["extends"]({},u,{state:"VISIBLE"})].concat(e.slice(1)):e;var ca={};v.commentIDs.forEach(function(a){ca[a]="VISIBLE"});o=babelHelpers["extends"]({},v,{visibleStates:ca});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:t,expanded:!0,newCommentsPage:o,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");m=(u!=null?u.commentIDs.length:0)+v.commentIDs.length;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:t,expanded:!0,newCommentsPage:o,repliesCollapser:h({count:m,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0})}if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:h({count:f,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});case"HIDE_COMMENTS":l=a.args.commentIDs;A=c.commentsHiddenByViewer;var I=babelHelpers["extends"]({},A);l.forEach(function(a){I[a]="LOCALLY_HIDDEN"});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:I}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:I});case"RECEIVE_COMMENTS_PAGE":x=c.commentPages;w=c.locallyComposedCommentIDs;var J=c.newCommentsPage;r=c.pagers;y=a.args;var K=y.commentIDs;z=y.depth;k=y.direction;d=y.feedbackTargetID;e=y.hiddenCommentIDs;u=y.pageSize;var L=s.isPagerLoading({depth:z,direction:k,state:c})===!0;v=z!==0&&s.isRepliesExpanderLoading({depth:z,state:c});var da=z===0&&!L;t=J.commentIDs.filter(function(a){return!(K.includes(a)&&(!da||J.visibleStates[a]==="HIDDEN"))});o=w.filter(function(a){return!K.includes(a)});var M={};t.forEach(function(a){M[a]=J.visibleStates[a]});m=babelHelpers["extends"]({},J,{commentIDs:t,visibleStates:M});var ea=new Set(x.reduce(function(a,b){return a.concat(b.commentIDs)},[]).concat(da?t:[]));f=K.filter(function(a){return!ea.has(a)});k==="forward"&&a.args.hasNext===!0&&a.args.afterCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",d).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that has_next_page but after_count is 0");a.args.direction==="forward"&&a.args.hasNext===!1&&a.args.afterCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",d).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that does NOT have next_page but after_count is > 0");a.args.direction==="backward"&&a.args.hasPrevious===!0&&a.args.beforeCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",d).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that has_previous_page but before_count is 0");a.args.direction==="backward"&&a.args.hasPrevious===!1&&a.args.beforeCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",d).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that does NOT have previous_page but before_count is > 0");A=c.shouldComposerRenderWhenListIsExpanded===!0||L===!0||v===!0;var N=babelHelpers["extends"]({},c.commentsHiddenByViewer);e.forEach(function(a){Object.prototype.hasOwnProperty.call(N,a)||(N[a]="COLLAPSED")});l=ea.size;if(z!==0&&a.args.direction==="forward"&&l===0){y=a.args;w=y.afterCount;k=y.hasNext;d={backward:null,forward:g({count:w,direction:"forward",error:null,hasMore:k,isLoading:!1,pageSize:u})};var O=c.expanded||v?"VISIBLE":"HIDDEN";e={__type:"COMMENTS_PAGE",afterCount:w,beforeCount:t.length,commentIDs:f,hasNext:k,hasPrevious:!1,state:O};t.forEach(function(a){M[a]=O});m=babelHelpers["extends"]({},J,{commentIDs:t,visibleStates:M});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");if(c.__type!=="DEPTH_1")throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");l=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[e],commentsHiddenByViewer:N,expanded:O==="VISIBLE",locallyComposedCommentIDs:o,newCommentsPage:m,pagers:d,repliesCollapser:h({count:f.length,expanded:v,minCountToShowCollapser:l}),repliesExpander:v?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:A})}y=x[0];w=x[x.length-1];k=s.getVisibleCommentsCount({depth:z,state:c});if(a.args.direction==="backward"){if(L&&y!=null&&y.state!=="VISIBLE")throw b("unrecoverableViolation")("Expected first available page to be visible if backward pager was loading when backward comments were received","ufi2");e=a.args;d=e.beforeCount;l=e.hasPrevious;z=d<=t.length;z&&(M={},m.commentIDs.forEach(function(a){M[a]=L?"VISIBLE":"HIDDEN"}),m=babelHelpers["extends"]({},m,{visibleStates:M}));e=d-m.commentIDs.length-o.length;t=babelHelpers["extends"]({},r,{backward:L?g({count:e,direction:"backward",error:null,hasMore:l&&!z,isLoading:!1,pageSize:u}):r.backward});e={__type:"COMMENTS_PAGE",afterCount:((e=y==null?void 0:y.afterCount)!=null?e:0)+((y=y==null?void 0:(e=y.commentIDs)==null?void 0:e.length)!=null?y:0),beforeCount:d,commentIDs:f,hasNext:!0,hasPrevious:l,state:L||v?"VISIBLE":"HIDDEN"};if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[e].concat(x),commentsHiddenByViewer:N,locallyComposedCommentIDs:o,newCommentsPage:m,pagers:t,shouldComposerRenderWhenListIsExpanded:A});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");y=a.args.minCountToShowCollapser;d=v?!0:c.expanded;l=k+(e.state==="VISIBLE"?f.length:0)+(z&&L?m.commentIDs.length:0);return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[e].concat(x),commentsHiddenByViewer:N,expanded:d,locallyComposedCommentIDs:o,newCommentsPage:m,pagers:t,repliesCollapser:h({count:l,expanded:d,minCountToShowCollapser:y}),repliesExpander:v?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:A})}if(L&&w!=null&&w.state!=="VISIBLE")throw b("unrecoverableViolation")("Expected last available page to be visible if forward pager was loading when forward comments were received","ufi2");z=a.args;e=z.afterCount;t=z.hasNext;l=babelHelpers["extends"]({},r,{forward:L?g({count:e,direction:"forward",error:null,hasMore:t,isLoading:!1,pageSize:u}):r.forward});u={__type:"COMMENTS_PAGE",afterCount:e,beforeCount:((d=w==null?void 0:w.beforeCount)!=null?d:0)+((z=w==null?void 0:(y=w.commentIDs)==null?void 0:y.length)!=null?z:0),commentIDs:f,hasNext:t,hasPrevious:!0,state:L||v?"VISIBLE":"HIDDEN"};var P=0;r=v?x.map(function(a){a.state==="HIDDEN"&&(P+=a.commentIDs.length);return babelHelpers["extends"]({},a,{state:"VISIBLE"})}):x;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[].concat(r,[u]),commentsHiddenByViewer:N,locallyComposedCommentIDs:o,newCommentsPage:m,pagers:l,shouldComposerRenderWhenListIsExpanded:A});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");e=a.args.minCountToShowCollapser;d=u.state==="VISIBLE"?k+P+f.length:k+P;w=v?!0:c.expanded;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[].concat(r,[u]),commentsHiddenByViewer:N,expanded:w,locallyComposedCommentIDs:o,newCommentsPage:m,pagers:l,repliesCollapser:h({count:d,expanded:w,minCountToShowCollapser:e}),repliesExpander:v?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:A});case"RECEIVE_NEW_COMMENT":y=a.args;var Q=y.commentID;z=y.depth;t=y.pageSize;x=y.prevTotalCount;f=y.totalCount;k=c.commentPages;r=c.commentsByID;u=c.expanded;o=c.locallyComposedCommentIDs;var R=c.newCommentsPage;m=c.pagers;l=c.viewOption;d=s.getCommentsCount({depth:z,state:c})===0;w=Object.prototype.hasOwnProperty.call(R.visibleStates,Q)||k.some(function(a){return a.commentIDs.includes(Q)});if(w)return c;e=r[Q]!=null&&r[Q].is_locally_composed===!0;v=c.repliesExpander!=null?babelHelpers["extends"]({},c.repliesExpander,{count:Math.min(c.repliesExpander.count+1,f)}):null;if(k.length===0){y=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(A={},A[Q]=u||e||z!==0&&d&&x===0?"VISIBLE":"HIDDEN",A))});A=((w=r[Q])==null?void 0:w.is_locally_composed)===!0?[Q].concat(o):o;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",locallyComposedCommentIDs:A,newCommentsPage:y});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");w=a.args.minCountToShowCollapser;d=d&&x===0?!0:u;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:d,locallyComposedCommentIDs:A,newCommentsPage:y,repliesCollapser:h({count:y.commentIDs.length,expanded:u,minCountToShowCollapser:w}),repliesExpander:v,shouldComposerRenderWhenListIsExpanded:!0})}var fa=(d=r[Q])==null?void 0:d.reply_comment_parent_fbid;if(c.__type!=="DEPTH_0"&&a.args.depth!==0&&l==="RANKED_SUB_REPLIES"&&fa!=null){var S=!1;A=k.map(function(a){__p&&__p();if(!S){var b=a.commentIDs.indexOf(fa);if(b>=0){S=!0;var c=[].concat(a.commentIDs);c.splice(b+1,0,Q);return babelHelpers["extends"]({},a,{commentIDs:c})}}return a});if(S)return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:A})}y=k[0];w=p(c);r=z===0&&s.hasMoreInDirection({depth:z,direction:"forward",state:c,totalCount:f})&&!c.commentPages.some(function(a){return a.state==="VISIBLE"});if(!r&&e){var T=!1,U=babelHelpers["extends"]({},R.visibleStates),ga=[],V=[];d=k.map(function(a){if(!T&&a.state==="VISIBLE"){T=!0;R.commentIDs.forEach(function(a){U[a]==="VISIBLE"?(delete U[a],V.push(a)):ga.push(a)});return babelHelpers["extends"]({},a,{commentIDs:[Q].concat(V,a.commentIDs)})}return T?babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1+V.length}):a});l=babelHelpers["extends"]({},R,{commentIDs:ga,visibleStates:U});A=[Q].concat(o);if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:d,locallyComposedCommentIDs:A,newCommentsPage:l});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");var W=a.args.minCountToShowCollapser,X=s.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:d,locallyComposedCommentIDs:A,newCommentsPage:l,repliesCollapser:h({count:X+1,expanded:u,minCountToShowCollapser:W}),repliesExpander:v,shouldComposerRenderWhenListIsExpanded:!0})}else if(r){A={commentPages:k.map(function(a,b){return b===0?babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0}):a}),locallyComposedCommentIDs:e?[Q].concat(o):o,newCommentsPage:babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(d={},d[Q]="VISIBLE",d))})};return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,A,{__type:"DEPTH_0"}):babelHelpers["extends"]({},c,A,{__type:"DEPTH_1"})}else if(w&&aa(c)){l=k.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})});W=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(X={},X[Q]="VISIBLE",X))});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:l,newCommentsPage:W});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");r=a.args.minCountToShowCollapser;e=s.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:l,newCommentsPage:W,repliesCollapser:h({count:e+1,expanded:u,minCountToShowCollapser:r}),repliesExpander:v,shouldComposerRenderWhenListIsExpanded:!0})}else if(w&&R.commentIDs.length===0){o=m.backward!=null?babelHelpers["extends"]({},m,{backward:babelHelpers["extends"]({},m.backward,{count:Math.min(m.backward.count+1,t)})}):m;d=y.commentIDs.length<t;if(d){A=[babelHelpers["extends"]({},y,{commentIDs:[Q].concat(y.commentIDs)})].concat(k.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:A,pagers:o}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:A,pagers:o,repliesExpander:v})}X=[{__type:"COMMENTS_PAGE",afterCount:y.afterCount+y.commentIDs.length,beforeCount:0,commentIDs:[Q],hasNext:!0,hasPrevious:!1,state:"HIDDEN"},babelHelpers["extends"]({},y,{beforeCount:1,hasPrevious:!0})].concat(k.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:X,pagers:o}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:X,pagers:o,repliesExpander:v})}else{z=f<=x;l=z?k:k.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0})});W=m.backward!=null?babelHelpers["extends"]({},m,{backward:babelHelpers["extends"]({},m.backward,{count:z?m.backward.count:Math.min(m.backward.count+1,t)})}):m;u=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(e={},e[Q]="HIDDEN",e))});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:l,newCommentsPage:u,pagers:W}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:l,newCommentsPage:u,pagers:W,repliesExpander:v})}case"RECEIVE_REFETCH_LIST":r=a.args.depth;w=c.feedbackTargetID;d=c.topLevelFeedbackTargetID;A=c.viewOption;if(r!==0)throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");if(!s.isListLoading({depth:r,state:c}))throw b("unrecoverableViolation")("Expected list to be loading","ufi2");y=n.getInitialState({args:babelHelpers["extends"]({},a.args,{depth:0,feedbackTargetID:w,initiallyExpanded:!0,topLevelFeedbackTargetID:d,viewOption:A}),state:null});if(y.__type!=="DEPTH_0")throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");return babelHelpers["extends"]({},y,{__type:"DEPTH_0",expanded:c.expanded,status:{error:null,pending:!1}});case"REQUEST_COMMENTS_PAGE":X=a.args;o=X.depth;f=X.direction;x=X.pageSize;k=c.commentPages;z=c.expanded;t=c.newCommentsPage;m=c.pagers;if(!z)throw b("unrecoverableViolation")("Expected list to be expanded","ufi2");if(s.isPagerLoading({depth:o,direction:f,state:c}))throw b("unrecoverableViolation")("Cant request page if pager is loading","ufi2");if(o===0&&s.isListLoading({depth:o,state:c}))throw b("unrecoverableViolation")("Cant request page if list is loading","ufi2");if(o!==0&&s.isRepliesExpanderLoading({depth:o,state:c}))throw b("unrecoverableViolation")("Cant request page if replies expander is loading","ufi2");if(f==="backward"){e=k.findIndex(function(a){return a.state==="VISIBLE"});l=-1;if(e>-1){u=k[e];u.hasPrevious===!1&&b("FBLogger")("ufi2").mustfix("CometUFICommentList.updater(...): REQUEST_COMMENTS_PAGE - Can't request previous comments if there are no more comments available, feedbackID: %s",c.topLevelFeedbackTargetID);if(u.hasPrevious!==!0)throw b("unrecoverableViolation")("Can't request previous comments if there are no more comments available","ufi2");l=e-1}else e===-1&&k.length>0&&(l=0);W=k[l];v=p(c)&&q(c,"HIDDEN");if(W&&W.state==="HIDDEN"){r=[].concat(k);r[l]=babelHelpers["extends"]({},W,{state:"VISIBLE"});w=babelHelpers["extends"]({},m,{backward:g({count:W.beforeCount,direction:"backward",error:null,hasMore:W.hasPrevious,isLoading:!1,pageSize:x})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:r,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:w,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");d=a.args.minCountToShowCollapser;A=s.getVisibleCommentsCount({depth:o,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:r,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:w,repliesCollapser:h({count:A+W.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:d}),shouldComposerRenderWhenListIsExpanded:!0})}else if(v){var ha={};t.commentIDs.forEach(function(a){ha[a]="VISIBLE"});y=babelHelpers["extends"]({},t,{visibleStates:ha});X=babelHelpers["extends"]({},m,{backward:null});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:y,pagers:X,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");z=a.args.minCountToShowCollapser;f=s.getVisibleCommentsCount({depth:o,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:y,pagers:X,repliesCollapser:h({count:f+y.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:z}),shouldComposerRenderWhenListIsExpanded:!0})}else{u=babelHelpers["extends"]({},m,{backward:babelHelpers["extends"]({},m.backward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:u}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:u})}}e=[].concat(k).reverse().findIndex(function(a){return a.state==="VISIBLE"});l=-1;if(e>-1){r=k.length-1-e;w=k[r];if(w.hasNext!==!0)throw b("unrecoverableViolation")("Can't request previous comments if there are no more comments available","ufi2");l=r+1}else e===-1&&k.length>0&&(l=k.length-1);A=k[l];if(A&&A.state==="HIDDEN"){W=[].concat(k);W[l]=babelHelpers["extends"]({},A,{state:"VISIBLE"});d=babelHelpers["extends"]({},m,{forward:g({count:A.afterCount,direction:"forward",error:null,hasMore:A.hasNext,isLoading:!1,pageSize:x})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:W,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:d,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");v=a.args.minCountToShowCollapser;t=s.getVisibleCommentsCount({depth:o,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:W,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:d,repliesCollapser:h({count:t+A.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:v}),shouldComposerRenderWhenListIsExpanded:!0})}else{X=babelHelpers["extends"]({},m,{forward:babelHelpers["extends"]({},m.forward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:X}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:X})}case"REQUEST_REFETCH_LIST":f=a.args.depth;if(f!==0||c.__type!=="DEPTH_0")throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");if(s.isListLoading({depth:f,state:c}))throw b("unrecoverableViolation")("Expected list to be loading","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[],expanded:!0,hasPaged:{backward:!1,forward:!1},locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:{backward:null,forward:null},status:{error:null,pending:!0}});case"SET_CAN_VIEWER_COMMENT":y=a.args.canViewerComment;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",canViewerComment:y}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",canViewerComment:y});case"SET_COMMENTS_BY_ID":z=a.args.commentsByID;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsByID:z}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsByID:z});case"SET_SERVER_COMMENT_ID":u=a.args;var Y=u.clientCommentID,Z=u.serverCommentID;w=c.commentPages;r=c.locallyComposedCommentIDs;e=c.newCommentsPage;k=e.commentIDs.indexOf(Y);l=k!==-1;x=w.some(function(a){return a.commentIDs.some(function(a){return a===Y})});if(!l&&!x)return c;o=e.commentIDs.some(function(a){return a===Z});W=w.filter(function(a){return a.state==="HIDDEN"}).some(function(a){return a.commentIDs.some(function(a){return a===Z})});d=w.filter(function(a){return a.state==="VISIBLE"}).some(function(a){return a.commentIDs.some(function(a){return a===Z})});t=c;if(W){A=w.map(function(a){var b=a.commentIDs.indexOf(Z);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),a.commentIDs.slice(b+1))})});t.__type==="DEPTH_0"?t=babelHelpers["extends"]({},t,{__type:"DEPTH_0",commentPages:A}):t=babelHelpers["extends"]({},t,{__type:"DEPTH_1",commentPages:A})}if(o){v=r.filter(function(a){return a===Y});m=e.commentIDs.filter(function(a){return a!==Y});X=babelHelpers["extends"]({},e.visibleStates);delete X[Y];f=babelHelpers["extends"]({},e,{commentIDs:m,visibleStates:X});t.__type==="DEPTH_0"?t=babelHelpers["extends"]({},t,{__type:"DEPTH_0",locallyComposedCommentIDs:v,newCommentsPage:f}):t=babelHelpers["extends"]({},t,{__type:"DEPTH_1",locallyComposedCommentIDs:v,newCommentsPage:f})}if(l){y=babelHelpers["extends"]({},e.visibleStates);if(d||o){z=e.commentIDs.filter(function(a){return a!==Y});delete y[Y];u=babelHelpers["extends"]({},e,{commentIDs:z,visibleStates:y});t.__type==="DEPTH_0"?t=babelHelpers["extends"]({},t,{__type:"DEPTH_0",newCommentsPage:u}):t=babelHelpers["extends"]({},t,{__type:"DEPTH_1",newCommentsPage:u})}else{k=e.commentIDs.map(function(a){return a===Y?Z:a});y[Z]=y[Y];delete y[Y];W=babelHelpers["extends"]({},e,{commentIDs:k,visibleStates:y});t.__type==="DEPTH_0"?t=babelHelpers["extends"]({},t,{__type:"DEPTH_0",newCommentsPage:W}):t=babelHelpers["extends"]({},t,{__type:"DEPTH_1",newCommentsPage:W})}}if(x)if(d||o){A=w.map(function(a){var b=a.commentIDs.indexOf(Y);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),a.commentIDs.slice(b+1))})});t.__type==="DEPTH_0"?t=babelHelpers["extends"]({},t,{__type:"DEPTH_0",commentPages:A}):t=babelHelpers["extends"]({},t,{__type:"DEPTH_1",commentPages:A})}else{m=w.map(function(a){var b=a.commentIDs.indexOf(Y);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),[Z],a.commentIDs.slice(b+1))})});t.__type==="DEPTH_0"?t=babelHelpers["extends"]({},t,{__type:"DEPTH_0",commentPages:m}):t=babelHelpers["extends"]({},t,{__type:"DEPTH_1",commentPages:m})}X=r.map(function(a){return a===Y?Z:a});return t.__type==="DEPTH_0"?babelHelpers["extends"]({},t,{__type:"DEPTH_0",locallyComposedCommentIDs:X}):babelHelpers["extends"]({},t,{__type:"DEPTH_1",locallyComposedCommentIDs:X});case"UNHIDE_COMMENTS":v=a.args.commentIDs;f=c.commentsHiddenByViewer;var $=babelHelpers["extends"]({},f);v.forEach(function(a){delete $[a]});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:$}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:$});case"INITIAL_STATE":default:a.__type;throw b("unrecoverableViolation")("CometUFICommentListState: Invalid action type: "+a.__type,"ufi2")}}function m(a,c){__p&&__p();try{var d=k(a,c);return d}catch(f){d=b("ErrorNormalizeUtils").normalizeError(f);d=d.message;var e=a.__type==="REQUEST_COMMENTS_PAGE"||a.__type==="RECEIVE_COMMENTS_PAGE"?a.args.direction:"Unknown";b("FBLogger")("ufi2").catching(f).addMetadata("UFI","COMMENTS_LIST_ACTION",a.__type).addMetadata("UFI","COMMENTS_LIST_DEPTH",""+a.args.depth).addMetadata("UFI","COMMENTS_LIST_DIRECTION",e).mustfix("CometUFICommentListState.updater(...): "+d);b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&a.__type!=="SET_COMMENTS_BY_ID"&&console.groupEnd();if(!c)throw f;return c}}function a(a,b){return k(a,b)}function c(a,b){return k(a,b)}var n={collapseList:function(a){var b=a.args;a=a.state;return m({__type:"COLLAPSE_LIST",args:b},a)},deleteComment:function(a){var b=a.args;a=a.state;return m({__type:"DELETE_COMMENT",args:b},a)},expandHiddenComments:function(a){var b=a.args;a=a.state;return m({__type:"EXPAND_HIDDEN_COMMENTS",args:b},a)},expandList:function(a){var b=a.args;a=a.state;return m({__type:"EXPAND_LIST",args:b},a)},getInitialState:function(a){var b=a.args;a=a.state;return m({__type:"INITIAL_STATE",args:b},a)},hideComments:function(a){var b=a.args;a=a.state;return m({__type:"HIDE_COMMENTS",args:b},a)},receiveCommentsPage:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_COMMENTS_PAGE",args:b},a)},receiveNewComment:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_NEW_COMMENT",args:b},a)},receiveRefetchList:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_REFETCH_LIST",args:b},a)},requestCommentsPage:function(a){var b=a.args;a=a.state;return m({__type:"REQUEST_COMMENTS_PAGE",args:b},a)},requestRefetchList:function(a){var b=a.args;a=a.state;return m({__type:"REQUEST_REFETCH_LIST",args:b},a)},setCanViewerComment:function(a){var b=a.args;a=a.state;return m({__type:"SET_CAN_VIEWER_COMMENT",args:b},a)},setCommentsByID:function(a){var b=a.args;a=a.state;return m({__type:"SET_COMMENTS_BY_ID",args:b},a)},setServerCommentID:function(a){var b=a.args;a=a.state;return m({__type:"SET_SERVER_COMMENT_ID",args:b},a)},unhideComments:function(a){var b=a.args;a=a.state;return m({__type:"UNHIDE_COMMENTS",args:b},a)}};function o(a){var b=a.direction;a=a.state;b=b==="forward"?[].concat(a.commentPages).reverse():a.commentPages;return b.find(function(a){return a.state==="VISIBLE"})}function p(a){var b=a.commentPages;a=a.newCommentsPage;b=b[0];return!b?a.commentIDs.length>0:b.beforeCount-a.commentIDs.length===0}function aa(a){var b=a.commentPages;b=b[0];return!b?p(a)&&q(a,"VISIBLE"):p(a)&&b.state==="VISIBLE"&&q(a,"VISIBLE")}function q(a,b){var c=a.newCommentsPage;return c.commentIDs.every(function(a){return c.visibleStates[a]===b})}function r(a){var c=a.__type,d=a.commentPages,e=a.newCommentsPage;a=a.viewOption;c=c==="DEPTH_1"&&!b("UFI2ViewOption").isChronologicalOrder(a);a=d.filter(function(a){return a.state==="VISIBLE"}).reduce(function(a,b){return a.concat(b.commentIDs)},[]);d=e.commentIDs.filter(function(a){return e.visibleStates[a]==="VISIBLE"});return c?[].concat(a,d.reverse()):[].concat(d,a)}var s={canFetchInDirection:function(a){__p&&__p();var b=a.depth,c=a.direction,d=a.state;a=a.totalCount;if(a===0)return!1;a=d.commentPages;var e=d.newCommentsPage,f=s.isPagerLoading({depth:b,direction:c,state:d});if(f)return!1;f=b===0&&s.isListLoading({depth:b,state:d});if(f)return!1;f=b!==0&&s.isRepliesExpanderLoading({depth:b,state:d});if(f)return!1;if(a.length===0&&c==="forward")return!0;else if(a.length===0&&c==="backward")return!1;f=a[0];a=a[a.length-1];b=s.getPagerCount({depth:b,direction:"backward",state:d});b=b===e.commentIDs.length&&q(d,"HIDDEN");return c==="backward"?f.state!=="HIDDEN"&&!b&&f.hasPrevious:a.state!=="HIDDEN"&&a.hasNext},getCommentsCount:function(a){a.depth;a=a.state;var b=a.commentPages;a=a.newCommentsPage;return a.commentIDs.concat(b.reduce(function(a,b){return a.concat(b.commentIDs)},[])).length},getCountForFetch:function(a){__p&&__p();var c=a.depth,d=a.direction,e=a.pageSize;a=a.state;d=s.getPagerCount({depth:c,direction:d,state:a});if(d!=null)return d;if(c!==0){if(e==null)throw b("unrecoverableViolation")("CometUFICommentListState.getCountForFetch(...): Expected pageSize to compute fetch count for expanding replies","ufi2");d=s.getRepliesExpanderCount({depth:c,state:a});if(d!=null)return Math.min(d,e)}return null},getHiddenStateForComment:function(a){var b=a.commentID;a.depth;a=a.state;a=a.commentsHiddenByViewer;return a[b]||null},getPagerCount:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.count:null},getPagerError:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.status.error:null},getRepliesCollapserCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesCollapser;return b!=null?b.count:null},getRepliesExpanderCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.count:null},getRepliesExpanderError:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.status.error:null},getVisibleComments:function(a){__p&&__p();a.depth;a=a.state;var c=a.commentsByID,d=a.locallyComposedCommentIDs,e=a.newCommentsPage,f=a.viewOption;a=r(a);var g=a.map(function(a){var d=c[a];if(!d){b("FBLogger")("ufi2").warn("CometUFICommentListState.getVisibleComments: Could not find comment locally: %s",a);return null}return d}).filter(Boolean);a.length>0&&g.length===0&&b("FBLogger")("ufi2").warn("CometUFICommentListState.getVisibleComments: Could not find ANY of the %s comments locally",a.length);return!d.length&&e.commentIDs.length>0&&!(b("gkx")("1098171")&&!b("UFI2ViewOption").isChronologicalOrder(f))?g.sort(function(a,b){return((b=b.created_time)!=null?b:0)-((b=a.created_time)!=null?b:0)}):g},getVisibleCommentsCount:function(a){a.depth;a=a.state;return r(a).length},getVisibleCommentsGroupedByCollapsedState:function(a){__p&&__p();var b=a.depth,c=a.reverse,d=a.shouldCollapseComment;a=a.state;b=s.getVisibleComments({depth:b,state:a});a=c?b.slice().reverse():b;return a.reduce(function(a,b){__p&&__p();var c=d(b)?"COLLAPSED":"VISIBLE";if(a.length===0)return[{comments:[b],state:c}];var e=a[a.length-1],f=e.comments[e.comments.length-1];if(!f)return a;f=e.state;if(f===c){e.comments.push(b);return a}return[].concat(a,[{comments:[b],state:c}])},[])},getVisibleCommentsWithHiddenCommentsCollapsed:function(a){var b=a.depth,c=a.reverse,d=a.state;return s.getVisibleCommentsGroupedByCollapsedState({depth:b,reverse:c,shouldCollapseComment:function(a){return s.getHiddenStateForComment({commentID:a.id,depth:b,state:d})==="COLLAPSED"},state:d})},hasLastPageLeftInDirection:function(a){a.depth;var b=a.direction,c=a.pageSize,d=a.state;a=a.totalCount;d=o({direction:b,state:d});if(!d)return b==="forward"?a<=c:!1;return b==="forward"?d.afterCount<=c:d.beforeCount<=c},hasMoreInDirection:function(a){a.depth;var b=a.direction,c=a.state;a=a.totalCount;c=o({direction:b,state:c});if(!c)return b==="forward"?a>0:!1;return b==="forward"?c.hasNext:c.hasPrevious},hasPagedInDirection:function(a){a.depth;var b=a.direction;a=a.state;a=a.hasPaged;return a[b]},hasVisibleComments:function(a){var b=a.depth;a=a.state;return s.getVisibleComments({depth:b,state:a}).length>0},isComposerVisible:function(a){a.depth;a=a.state;return a.canViewerComment&&a.expanded&&a.shouldComposerRenderWhenListIsExpanded},isListExpanded:function(a){a.depth;a=a.state;return a.expanded},isListLoading:function(a){var b=a.depth;a=a.state;return b!==0||a.__type!=="DEPTH_0"?!1:a.status.pending},isPagerLoading:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null?a.status.pending:!1},isPagerVisible:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null},isRepliesCollapserVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesCollapser;return b!=null},isRepliesExpanderLoading:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null?b.status.pending:!1},isRepliesExpanderVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null}};e.exports={_updaterDepth0_DO_NOT_USE:a,_updaterDepth1_DO_NOT_USE:c,Selectors:s,StateUpdaters:n}}),null);
__d("CometUFICommentListGetDerivedStateFromProps",["CometUFICommentListState","UFI2CommentsConfig","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("CometUFICommentListState").Selectors,h=b("CometUFICommentListState").StateUpdaters;function i(a){var b=a.depth,c=a.feedback;a=a.topLevelFeedback;return b===0?Boolean(c.can_viewer_comment):a!=null&&a.can_viewer_comment===!0&&c!=null&&c.can_viewer_comment===!0}function a(a,c){__p&&__p();var d=c.listState;c=c.mirroredProps;if(c===a)return{listState:d,mirroredProps:c};var e=c.connectionGeneration,f=c.feedback,k=c.isRefetchingConnection,l=c.topLevelFeedback;c=c.totalCount;var m=a.commentIDs,n=a.commentsByID,o=a.connectionGeneration,p=a.connectionPageInfo,q=a.depth,r=a.feedback,s=a.hiddenCommentIDs,t=a.isRefetchingConnection,u=a.shouldRenderComposerPreemptively,v=a.topLevelFeedback,w=a.totalCount,x=a,y=p.afterCount,z=p.beforeCount,A=p.hasNext,B=p.hasPrevious;p=p.pageSize;var C=d;C=h.setCommentsByID({args:{commentsByID:n,depth:q},state:C});if(q===0&&g.isListLoading({depth:q,state:C})){k=k===!0&&t===!1;k&&(C=h.receiveRefetchList({args:{afterCount:y,beforeCount:z,canViewerComment:i({depth:q,feedback:r,topLevelFeedback:v}),commentIDs:m,commentsByID:n,depth:q,hasNext:A,hasPrevious:B,hiddenCommentIDs:s,pageSize:p,shouldRenderComposerPreemptively:u,totalCount:w},state:C}));return{listState:C,mirroredProps:x}}if(o>e){C=j(x,d);return{listState:C,mirroredProps:x}}t=a.commentIDsUpdatedToServerIDs;k=a.newlyCreatedCommentIDs;y=a.newlyHiddenCommentIDs;z=a.newlyUnhiddenCommentIDs;m=a.removedCommentIDs;n=i({depth:q,feedback:f,topLevelFeedback:l});A=i({depth:q,feedback:r,topLevelFeedback:v});t.length>0&&t.forEach(function(a){var b=a.clientID;a=a.serverID;C=h.setServerCommentID({args:{clientCommentID:b,depth:q,serverCommentID:a},state:C})});n!==A&&(C=h.setCanViewerComment({args:{canViewerComment:A,depth:q},state:C}));y.length>0&&(C=h.hideComments({args:{commentIDs:y,depth:q},state:C}));z.length>0&&(C=h.unhideComments({args:{commentIDs:z,depth:q},state:C}));if(k.length>0){B=a.connectionPageInfo.pageSize;for(var s=k.length-1;s>=0;s--){p=k[s];q===0?C=h.receiveNewComment({args:{commentID:p,depth:q,pageSize:B,prevTotalCount:c,totalCount:w},state:C}):C=h.receiveNewComment({args:{commentID:p,depth:q,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies,pageSize:B,prevTotalCount:c,totalCount:w},state:C})}}else m.length>0&&m.forEach(function(a){q===0?C=h.deleteComment({args:{commentID:a,depth:q},state:C}):C=h.deleteComment({args:{commentID:a,depth:q,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies},state:C})});return{listState:C,mirroredProps:x}}function j(a,c){var d=a.commentIDs,e=a.commentsByID,f=a.connectionPageInfo,g=f.afterCount,j=f.beforeCount,k=f.hasNext,l=f.hasPrevious;f=f.pageSize;var m=a.depth,n=a.feedback,o=a.hiddenCommentIDs,p=a.isInitiallyExpanded,q=a.shouldRenderComposerPreemptively,r=a.topLevelFeedback,s=a.totalCount;a=a.viewOption;var t=i({depth:m,feedback:n,topLevelFeedback:r});j={afterCount:g,beforeCount:j,canViewerComment:t,commentIDs:d,commentsByID:e,feedbackTargetID:b("nullthrows")(n.id),hasNext:k,hasPrevious:l,hiddenCommentIDs:o,initiallyExpanded:p,pageSize:f,shouldRenderComposerPreemptively:q,topLevelFeedbackTargetID:(g=r==null?void 0:r.id)!=null?g:b("nullthrows")(n.id),totalCount:s,viewOption:a};return m===0?h.getInitialState({args:babelHelpers["extends"]({},j,{depth:0}),state:(t=c)!=null?t:null}):h.getInitialState({args:babelHelpers["extends"]({},j,{depth:1,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies}),state:(d=c)!=null?d:null})}e.exports={getCanViewerComment:i,getDerivedStateFromProps:a,getInitialState:j}}),null);
__d("CometUFICommentsProviderState",["FBLogger","gkx","isUFI2ClientID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a!=null&&(a.is_locally_composed===!0||a.is_created_from_subscription===!0||a.optimistic_error!=null||a.optimistic_action!=null)}function h(a){return!a||a.spam_display_mode==null?!1:(a==null?void 0:a.spam_display_mode)!=="none"}function a(a){a=(a=a.feedback.display_comments)==null?void 0:a.before_count;return typeof a==="number"?a:null}function i(a){return a.filter(function(a){return b("isUFI2ClientID")(a)})}function j(a){__p&&__p();var c={};a=a?a.map(function(a){__p&&__p();if(!a){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received null edge from comments connection.");return null}a=a.node;if(!a){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received null comment from comments connection.");return null}if(a.id!=null){var d=a.id;c[d]=a;return d}else{b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received comment with null id from comments connection.");return null}}).filter(Boolean):[];if(a.length>Object.keys(c).length){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received duplicate comments from comments connection");var d=new Set();return{commentIDs:a.filter(function(a){if(d.has(a))return!1;d.add(a);return!0}),commentsByID:c}}return{commentIDs:a,commentsByID:c}}function k(a,c){var d=Object.keys(a),e=Object.keys(c),f=d.length,g=e.length;if(g>=f)return[];e.every(function(b){return Object.prototype.hasOwnProperty.call(a,b)})||b("FBLogger")("ufi2").warn("CometUFICommentsProvider: Expected next comments to be a subset of previous comments when removing a comment");g=d.filter(function(a){return!Object.prototype.hasOwnProperty.call(c,a)});return g}function l(a,c,d,e){__p&&__p();var f=[];d=a.filter(function(a){return!b("isUFI2ClientID")(a)});var g=function(){__p&&__p();if(i){if(j>=h.length)return"break";a=h[j++]}else{j=h.next();if(j.done)return"break";a=j.value}var b=a,d=e[b],g=d&&d.client_id!=null?d.client_id:null;g!=null&&c.find(function(a){return a===g})&&f.push({clientID:g,serverID:b})};for(var h=d,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){d=g();if(d==="break")break}return f}function m(a,c,d){__p&&__p();if(d.length<=c.length)return[];var e=a[d[0]];if(!e){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getNewlyCreatedCommentIDs(...): Next most recent comment not found");return[]}e=c.filter(function(b){return g(a[b])});c=d.filter(function(b){return g(a[b])});d=c.length-e.length>0;if(!d)return[];if(e.length===0){c.length>1&&b("FBLogger")("ufi2").info("CometUFICommentsProviderState.getNewlyCreatedCommentIDs(...): Received more than 1 new comment in a single update");return c}var f=new Set(e);return c.filter(function(a){return!f.has(a)})}function n(a,b){return b.filter(function(b){b=a[b];return b!=null&&h(b)})}function o(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!1&&h(c)===!0})}function p(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!0&&h(c)===!1})}function c(a,c){__p&&__p();var d=a.depth,e=c.commentsByID,f=c.commentIDs;a=j(a.edges);var g=a.commentIDs;a=a.commentsByID;var h=f.length,q=c.clientCommentIDs,r=g.length,s=i(g),t=c.selectedViewOption;c=c.isRefetchingConnection;var u=n(a,g),v=o(e,a,g),w=p(e,a,g);q=l(g,q,s,a);var x=r>h;h=h>r;r=x?m(a,f,g):[];x=h&&!c;f=x?k(e,a):[];h={clientCommentIDs:s,commentIDs:g,commentIDsUpdatedToServerIDs:q,commentsByID:a,hiddenCommentIDs:u,isRefetchingConnection:c,newlyCreatedCommentIDs:r,newlyHiddenCommentIDs:v,newlyUnhiddenCommentIDs:w,removedCommentIDs:f,selectedViewOption:t};b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&(console.groupCollapsed("%cUFI2 Relay Comments Connection Update at depth "+d+":",";background-color:#75DBCD;color:#1F2D3D;opacity:0.7;font-weight:bold;"),console.groupEnd());return h}function d(a){a=a.edges;a=j(a);var b=a.commentIDs;a=a.commentsByID;var c=i(b),d=n(a,b);return{clientCommentIDs:c,commentIDs:b,commentIDsUpdatedToServerIDs:[],commentsByID:a,hiddenCommentIDs:d,isRefetchingConnection:!1,newlyCreatedCommentIDs:[],newlyHiddenCommentIDs:[],newlyUnhiddenCommentIDs:[],removedCommentIDs:[],selectedViewOption:null}}e.exports={getBeforeCount:a,getClientCommentIDs:i,getCommentIDsUpdatedToServerIDs:l,getCommentsFromEdges:j,getDerivedStateFromProps:c,getHiddenCommentIDs:n,getInitialState:d,getNewlyCreatedCommentIDs:m,getNewlyHiddenCommentIDs:o,getNewlyUnhiddenCommentIDs:p,getRemovedCommentIDs:k}}),null);
__d("CometUFICommentsProvider.react",["requireDeferred","CometRelay","CometUFICommentsProviderState","FBLogger","React","RelayModern","RelayUFI2CommentsKeyContext","SiteData","UFI2CommentsConfig","UFI2Config","UFI2RealtimeContainer.react","UFI2RelayConnectionRenderer.react","relay-runtime","unrecoverableViolation","CometUFICommentsProvider_displayCommentsMetadata.graphql","CometUFICommentsProvider_displayCommentsHighlightedComments.graphql","CometUFICommentsProviderPaginationQuery.graphql","CometUFICommentsProviderReadCommentsPageQuery.graphql","CometUFICommentsProvider_feedback.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i,j,k;b("CometRelay").graphql;var l=b("CometRelay").readInlineData;c=b("CometUFICommentsProviderState").getDerivedStateFromProps;var m=b("CometUFICommentsProviderState").getInitialState,n=b("requireDeferred")("CometUFICreateCommentSubscription");d=b("RelayModern").createRefetchContainer;var o=b("SiteData").pr,p=b("relay-runtime").createOperationDescriptor,q=b("relay-runtime").getRequest,r=50,s=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(a){__p&&__p();var d;d=c.call(this,a)||this;d.state=m({edges:d.props.edges,feedback:d.props.feedback});d.$1=function(a){__p&&__p();var c=a.count,e=a.direction,f=a.onCommentsFetched;a=d.props;var g=a.depth,h=a.displayCommentsContext,i=a.feedback,j=a.feedbackSource,k=a.feedLocation,l=a.focusCommentID,m=a.isLoadingNext,n=a.isLoadingPrevious,p=a.loadNext,q=a.loadPrevious,r=a.topLevelViewOption;a=a.useDefaultActor;var s=d.state.selectedViewOption;i=i.id;if(!i){b("FBLogger")("ufi2").mustfix("CometUFICommentsProvider: Cant fetch without a feedback id");return}if(e==="forward"&&m)return;if(e==="backward"&&n)return;m={commentProfilePictureSizeDepth0:b("UFI2CommentsConfig").profilePictureSize32,commentProfilePictureSizeDepth1:b("UFI2CommentsConfig").profilePictureSize20,containerIsFeedStory:!0,containerIsLiveStory:!1,containerIsTahoe:!1,containerIsWorkplace:!1,displayCommentsContextEnableComment:h==null?void 0:h.enableComment,displayCommentsContextIsAdPreview:h==null?void 0:h.isAdPreview,displayCommentsContextIsAggregatedShare:h==null?void 0:h.isAggregatedShare,displayCommentsContextIsStorySet:h==null?void 0:h.isStorySet,displayCommentsFeedbackContext:h==null?void 0:h.feedbackContext,feedLocation:k,feedbackID:i,feedbackSource:j,focusCommentID:l,includeHighlightedComments:!1,includeNestedComments:g===0,isComet:!0,isInitialFetch:!1,scale:o,topLevelViewOption:r,useDefaultActor:a,viewOption:s};if(e==="backward")q(c,{onLoaded:function(a){var b=a.error;a=a.variables;return d.$2({direction:e,error:b,onCommentsFetched:f,variables:a})},queryVariables:m});else if(e==="forward")p(c,{onLoaded:function(a){var b=a.error;a=a.variables;return d.$2({direction:e,error:b,onCommentsFetched:f,variables:a})},queryVariables:m});else throw b("unrecoverableViolation")("CometUFICommentsProvider: Invalid direction","ufi2")};d.$3=function(a){var c=d.state.commentsByID[a];if(c==null){b("FBLogger")("ufi2").warn("CometUFICommentsProvider: Could not find requested comment locally: %s",a);return null}return c};d.$5=function(a){__p&&__p();var c=a.onComplete;a=a.queryVariables;var e=d.props,f=e.depth,g=e.displayCommentsContext,h=e.feedback,i=e.feedbackSource,j=e.feedLocation,k=e.focusCommentID,l=e.relay,m=e.topLevelViewOption;e=e.useDefaultActor;var n=d.state.selectedViewOption;h=h.id;if(!h){b("FBLogger")("ufi2").mustfix("CometUFICommentsProvider: Cant refetch without a feedback id");return}var p=babelHelpers["extends"]({commentProfilePictureSizeDepth0:b("UFI2CommentsConfig").profilePictureSize32,commentProfilePictureSizeDepth1:b("UFI2CommentsConfig").profilePictureSize20,containerIsFeedStory:!0,containerIsLiveStory:!1,containerIsTahoe:!1,containerIsWorkplace:!1,displayCommentsContextEnableComment:g==null?void 0:g.enableComment,displayCommentsContextIsAdPreview:g==null?void 0:g.isAdPreview,displayCommentsContextIsAggregatedShare:g==null?void 0:g.isAggregatedShare,displayCommentsContextIsStorySet:g==null?void 0:g.isStorySet,displayCommentsFeedbackContext:g==null?void 0:g.feedbackContext,feedLocation:j,feedbackID:h,feedbackSource:i,focusCommentID:k,includeHighlightedComments:f>0&&((a==null?void 0:a.isPaginating)==null||(a==null?void 0:a.isPaginating)===!1),includeNestedComments:!0,isComet:!0,isInitialFetch:!1,scale:o,topLevelViewOption:m,useDefaultActor:e,viewOption:n},a);d.setState({isRefetchingConnection:!0},function(){l.refetch(function(a){return babelHelpers["extends"]({},a,p)},null,function(a){return d.$4(a||null,c)})})};d.$6=function(a){var b=a.onComplete;a=a.viewOption;d.setState({selectedViewOption:a},function(){d.$5({onComplete:b,queryVariables:{isPaginating:!1}})})};d.$7=function(){__p&&__p();var a=d.props,c=a.commentsKey,e=a.depth,f=a.feedback,g=a.feedbackSource,h=a.feedLocation,i=a.focusCommentID,j=a.onNext,k=a.relay,l=a.useDefaultActor,m=f.id,o=f.subscription_target_id;if(e===1||!m||!o)return null;var p=!1,q={dispose:function(){p=!0}};n.load().then(function(a){if(p)return;q.dispose=a.subscribe({commentProfilePictureSizeDepth0:b("UFI2CommentsConfig").profilePictureSize32,commentProfilePictureSizeDepth1:b("UFI2CommentsConfig").profilePictureSize20,commentsKey:c,containerMapping:{containerIsFeedStory:!0,containerIsLiveStory:!1,containerIsTahoe:!1,containerIsWorkplace:!1},environment:k.environment,feedLocation:h,feedbackSource:g,focusCommentID:i,isComet:!0,onNext:j,subscriptionTargetID:o,topLevelFeedbackTargetID:m,useDefaultActor:l}).dispose})["catch"](function(a){return b("FBLogger")("ufi2").catching(a).mustfix("Error subscribing to CometUFICreateCommentSubscription, this is probably because the arguments didn't line up with what we're expected or someone has been tinkering with its implementation")});return q};return d}var d=a.prototype;d.$2=function(a){__p&&__p();var b=a.direction,c=a.error,d=a.onCommentsFetched;a=a.variables;if(c){d&&d({commentIDs:[],direction:b,error:c});return}c=this.props.relay.environment;var e=q(u);e=p(e,a);a=c.lookup(e.fragment).data;c=(a=a==null?void 0:(c=a.feedback)==null?void 0:(e=c.display_comments)==null?void 0:e.edges)!=null?a:[];e=c.map(function(a){return a==null?void 0:(a=a.node)==null?void 0:a.id}).filter(Boolean);d&&d({commentIDs:e||[],direction:b,error:null})};d.$4=function(a,b){this.setState({isRefetchingConnection:!1},function(){b&&b(a)})};d.render=function(){__p&&__p();var a,c,d,e=this.props,f=e.children,i=e.depth,j=e.feedback,k=e.hasNext,m=e.hasPrevious,n=e.isLoadingNext;e=e.isLoadingPrevious;var o=this.state,p=o.commentIDs,q=o.commentIDsUpdatedToServerIDs,s=o.commentsByID,t=o.hiddenCommentIDs,u=o.isRefetchingConnection,v=o.newlyCreatedCommentIDs,w=o.newlyHiddenCommentIDs,x=o.newlyUnhiddenCommentIDs,y=o.removedCommentIDs;o=o.selectedViewOption;var z=l(g!==void 0?g:g=b("CometUFICommentsProvider_displayCommentsMetadata.graphql"),j.display_comments);a=Math.ceil(((a=z==null?void 0:z.page_size)!=null?a:r)*(i>0?b("UFI2Config").legacyReplyFetchShortfallSimulationFactor:b("UFI2Config").legacyTopLevelFetchShortfallSimulationFactor));c=(c=z==null?void 0:z.ufi2_connection_generation)!=null?c:0;d={afterCount:(d=(d=j.display_comments)==null?void 0:d.after_count)!=null?d:0,beforeCount:(d=(d=j.display_comments)==null?void 0:d.before_count)!=null?d:0,hasNext:k,hasPrevious:m,pageSize:a};k=null;try{m=l(h!==void 0?h:h=b("CometUFICommentsProvider_displayCommentsHighlightedComments.graphql"),j.display_comments);k=(a=m==null?void 0:m.highlighted_comments)!=null?a:[]}catch(a){}m=(z==null?void 0:z.is_initially_expanded)===!0;a=(j=(a=j.display_comments)==null?void 0:a.count)!=null?j:0;j=(z==null?void 0:z.comment_order)||o;o=(o=z==null?void 0:z.reply_comment_order)!=null?o:null;return b("React").jsx(b("UFI2RealtimeContainer.react"),{subscribe:this.$7,children:f({commentIDs:p,commentIDsUpdatedToServerIDs:q,commentsByID:s,connectionGeneration:c,connectionPageInfo:d,fetchComments:this.$1,getComment:this.$3,hiddenCommentIDs:t,highlightedComments:k,isFetchingNextComments:n,isFetchingPreviousComments:e,isInitiallyExpanded:m,isRefetchingConnection:u,newlyCreatedCommentIDs:v,newlyHiddenCommentIDs:w,newlyUnhiddenCommentIDs:x,refetchConnection:this.$5,removedCommentIDs:y,replyViewOption:o,setViewOption:this.$6,shouldRenderComposerPreemptively:(f=z==null?void 0:z.should_render_composer_preemptively)!=null?f:i===0,totalCount:a,viewOption:j})})};return a}(b("React").PureComponent);s.displayName="CometUFICommentsProviderInternal";s.getDerivedStateFromProps=c;function a(a){var c=a.feedback.display_comments;if(!c){var d;return(d=a.fallback)!=null?d:null}return b("React").jsx(b("RelayUFI2CommentsKeyContext").Consumer,{children:function(d){return b("React").jsx(b("UFI2RelayConnectionRenderer.react"),{commentsKey:d,connection:c,paginationQuery:t,children:function(c){return b("React").jsx(s,babelHelpers["extends"]({commentsKey:d,depth:0},a,c))}})}})}var t=i!==void 0?i:i=b("CometUFICommentsProviderPaginationQuery.graphql"),u=j!==void 0?j:j=b("CometUFICommentsProviderReadCommentsPageQuery.graphql");e.exports=d(a,{feedback:k!==void 0?k:k=b("CometUFICommentsProvider_feedback.graphql")},t)}),null);
__d("CometUFICommentList.react",["fbt","CometRelay","CometUFICommentListGetDerivedStateFromProps","CometUFICommentListState","CometUFICommentsProvider.react","FBLogger","React","SearchableEntry","SubscriptionsHandler","UFI2CommentsConfig","debounce","emptyFunction","recoverableViolation","scrollIntoView","unrecoverableViolation","CometUFICommentList_feedback.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b("CometRelay").graphql;var i=b("CometRelay").useFragment,j=b("CometRelay").useRelayEnvironment,k=b("CometUFICommentListGetDerivedStateFromProps").getCanViewerComment;c=b("CometUFICommentListGetDerivedStateFromProps").getDerivedStateFromProps;var l=b("CometUFICommentListGetDerivedStateFromProps").getInitialState,m=b("CometUFICommentListState").Selectors,n=b("CometUFICommentListState").StateUpdaters;function o(a,b){return(a=a.comment_composer_placeholder)!=null?a:b>0?g._("\u0e40\u0e02\u0e35\u0e22\u0e19\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e15\u0e2d\u0e1a\u0e01\u0e25\u0e31\u0e1a..."):g._("\u0e40\u0e02\u0e35\u0e22\u0e19\u0e04\u0e27\u0e32\u0e21\u0e04\u0e34\u0e14\u0e40\u0e2b\u0e47\u0e19\u2026")}var p=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(a){__p&&__p();var d;d=c.call(this,a)||this;d.state={listState:l(d.props),mirroredProps:d.props};d.$6=null;d.$7=null;d.$8=new Map();d.$5=[];d.$9={};d.$10=!1;d.$11=!1;d.$12=!1;d.$13=!1;d.$4=new(b("SubscriptionsHandler"))();d.$14=null;d.$17=function(a){d.$5.indexOf(a)<0&&d.$5.push(a)};d.$18=function(a){d.$5=d.$5.map(function(b){return b===a?null:b}).filter(Boolean)};d.$19=function(){var a=d.props,b=a.depth,c=a.totalCount;d.$20(function(a){return n.collapseList({args:{depth:b,totalCount:c},state:a})})};d.$21=function(a){__p&&__p();var c=a.focusComposer,e=a.scrollToComposer;a=a.scrollToNode;var f=d.props,g=f.connectionPageInfo.pageSize,h=f.depth,i=f.fetchComments,j=f.refetchConnection,k=f.totalCount;c&&(d.$10=!0);e===!0&&(d.$11=!0);a!=null&&(d.$14=a);d.$15();var l=!1;d.$20(function(a){__p&&__p();var c=h===0&&m.isListLoading({depth:h,state:a})||h!==0&&m.isRepliesExpanderLoading({depth:h,state:a});if(c)return null;c=h===0?n.expandList({args:{depth:h,totalCount:k},state:a}):n.expandList({args:{depth:h,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies,totalCount:k},state:a});if(h===0){a=m.isListLoading({depth:h,state:c});l=a;return c}a=m.isRepliesExpanderLoading({depth:h,state:c});l=a;return c},function(a){__p&&__p();if(!l)return;if(h===0){j({});return}a=m.getCountForFetch({depth:h,direction:"forward",pageSize:g,state:a});if(a==null)return;i({count:a,direction:"forward",onCommentsFetched:d.$22})})};d.$23=function(a){var b=d.props.depth;d.$20(function(c){return n.expandHiddenComments({args:{commentIDs:a,depth:b},state:c})})};d.$24=function(){var a=d.props,c=a.depth,e=a.feedback,f=a.feedbackSource,g=a.feedLocation,h=a.focusCommentID;a=a.useDefaultActor;if(e.id==null)throw b("unrecoverableViolation")("CometUFICommentList: Expected feedback to have an id","ufi2");return{feedLocation:g,feedback:e,feedbackSource:f,feedbackTargetID:e.id,focusCommentID:h,placeholder:o(e,c),useDefaultActor:a}};d.$25=function(a){var b=d.props,c=b.depth,e=b.environment,f=b.feedback,g=b.feedbackSource,h=b.topLevelFeedback,i=b.totalCount;b=b.useDefaultActor;h=h==null?void 0:h.id;a={Selectors:m,comment:a,depth:c,environment:e,feedback:f,feedbackSource:g,onDeeplinkToComment:d.$26,onReplyToComment:d.$27,totalCount:i,useDefaultActor:b};return h==null?a:babelHelpers["extends"]({},a,{topLevelFeedbackID:h})};d.$28=function(){var a=d.props,b=a.commentParent,c=a.depth,e=a.feedback,f=a.feedbackSource,g=a.feedLocation,h=a.focusCommentID,i=a.topLevelFeedback;a=a.useDefaultActor;i=i==null?void 0:i.id;b={commentParent:b,componentRef:c===0?d.$29:d.$30,feedLocation:g,feedback:e,feedbackSource:f,focusCommentID:h,placeholder:o(e,c),useDefaultActor:a};return i==null?b:babelHelpers["extends"]({},b,{topLevelFeedbackID:i})};d.$32=function(){return d.$31("forward")};d.$33=function(){return d.$31("backward")};d.$34=function(){var a=d.props,b=a.depth,c=a.environment;a=a.totalCount;var e=d.state.listState;return{Selectors:m,depth:b,environment:c,expandHiddenComments:d.$23,listState:e,totalCount:a}};d.$35=function(a){var c=d.props,e=c.depth,f=c.displayCommentsContext,g=c.feedback,h=c.feedbackSource,i=c.feedLocation,j=c.focusCommentID,k=c.getComment,l=c.useDefaultActor;c=c.viewOption;k=k(a);var m=k&&k.feedback,n=function(b){d.$9[a]=b,d.$36()};if(m==null)throw b("unrecoverableViolation")("CometUFICommentList: Expected comment to have a `feedback` in order to render a replies list.","ufi2");return{commentParent:k,depth:e+1,displayCommentsContext:f,feedLocation:i,feedback:m,feedbackSource:h,focusCommentID:j,listRef:n,topLevelFeedback:g,topLevelViewOption:c,useDefaultActor:l}};d.$41=function(){return d.$37("forward")};d.$42=function(){return d.$37("backward")};d.$43=function(){var a=d.props,b=a.connectionPageInfo.pageSize,c=a.depth,e=a.environment;a=a.totalCount;var f=d.state.listState;return{Selectors:m,depth:c,environment:e,listState:f,pageSize:b,totalCount:a}};d.$44=function(){var a=d.props,c=a.depth,e=a.environment;a=a.totalCount;var f=d.state.listState;if(c===0)throw b("unrecoverableViolation")("CometUFICommentList: Expected a replies list to get replies collapser props","ufi2");return{Selectors:m,collapseList:d.$19,depth:c,environment:e,listState:f,totalCount:a}};d.$45=function(){var a=d.props,c=a.depth,e=a.environment,f=a.highlightedComments,g=a.totalCount;a=a.viewOption;var h=d.state.listState;if(c===0)throw b("unrecoverableViolation")("CometUFICommentList: Expected a replies list to get replies expander props","ufi2");return{Selectors:m,depth:c,environment:e,expandList:d.$21,highlightedComments:f,listState:h,onMouseEnter:function(){return d.$40("forward")},totalCount:g,viewOption:a}};d.$22=function(a){__p&&__p();var c=a.commentIDs,e=a.direction;a=a.error;if(a)return;a=d.props;var f=a.connectionPageInfo,g=a.depth,h=a.feedback,i=a.hiddenCommentIDs,j=a.totalCount,k=f.afterCount,l=f.beforeCount,m=f.hasNext,o=f.hasPrevious,p=f.pageSize,q=h.id;if(q==null)throw b("unrecoverableViolation")("CometUFICommentList: Expected feedback to have an id","ufi2");var r=!1;d.$20(function(a){r=!0;if(g===0)if(e==="backward")return n.receiveCommentsPage({args:{beforeCount:l,commentIDs:c,depth:g,direction:e,feedbackTargetID:q,hasPrevious:o,hiddenCommentIDs:i,pageSize:p,totalCount:j},state:a});else return n.receiveCommentsPage({args:{afterCount:k,commentIDs:c,depth:g,direction:e,feedbackTargetID:q,hasNext:m,hiddenCommentIDs:i,pageSize:p,totalCount:j},state:a});else if(e==="backward")return n.receiveCommentsPage({args:{beforeCount:l,commentIDs:c,depth:g,direction:e,feedbackTargetID:q,hasPrevious:o,hiddenCommentIDs:i,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies,pageSize:p,totalCount:j},state:a});else return n.receiveCommentsPage({args:{afterCount:k,commentIDs:c,depth:g,direction:e,feedbackTargetID:q,hasNext:m,hiddenCommentIDs:i,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies,pageSize:p,totalCount:j},state:a})},function(a){r&&d.$46(e)})};d.$47=function(){d.$2()};d.$48=function(){d.$2.reset()};d.$29=function(a){d.$6=a,d.$15()};d.$30=function(a){d.$29(a);if(a&&d.$7){var b=d.$7;d.$7=null;d.$49(b,a)}a&&d.$13&&(d.$50(d.$1),d.$1=void 0,d.$13=!1);a&&d.$12&&(d.$51(),d.$12=!1)};d.$27=function(a){__p&&__p();var b=a.authorId,c=a.authorIsWeakReference,e=a.authorName,f=a.authorType,g=a.commentComposerPlaceholderText;a=a.commentId;var h=d.props,i=h.depth,j=h.feedback,l=h.getComment;h=h.topLevelFeedback;if(k({depth:i,feedback:j,topLevelFeedback:h})===!1)return;var m=l(a);m!=null&&d.$5.forEach(function(a){return a(m)});if(i!==0){d.$7=null;if(b!==((h=j.viewer_actor)==null?void 0:h.id)){l=d.$6;h={authorId:b,authorIsWeakReference:c,authorName:e,authorType:f};l?d.$49(h,l):d.$7=h}}if(i===0){b=d.$9[a];b!=null&&(b.$50(void 0),b.$51())}else d.$50({commentComposerPlaceholderText:g,id:a}),d.$51();d.$26({canViewerComment:j.can_viewer_comment!==!1,commentId:a,scrollToComposer:!0,scrollToNode:void 0})};d.$52=function(a){a=d.$9[a.id];return a!=null?m.isComposerVisible({depth:a.props.depth,state:a.state.listState}):!1};d.$53=function(a){a=d.$9[a.id];return a!=null?a.props.totalCount:0};d.$54=[];d.$55=new Map();d.$26=function(a){__p&&__p();var b=a.canViewerComment,c=a.commentId,e=a.scrollToComposer;a=a.scrollToNode;var f=d.props,g=f.depth,h=f.feedback;f=f.topLevelFeedback;h=k({depth:g,feedback:h,topLevelFeedback:f});if(!h)return;f=!0;a!=null&&(d.$55.has(c)&&(f=!1),d.$55.set(c,!0));if(g===0)if(b){h=c;a!=null&&(d.$54=d.$54.map(function(a){a=a.commentID;return{commentID:a,scrollToComposer:!1,scrollToNode:null}}));d.$54.push({commentID:h,scrollToComposer:!!e,scrollToNode:f?a:null});d.$36()}else{g=d.$6;g&&g.focus()}else d.$21({focusComposer:!0,scrollToComposer:e,scrollToNode:f?a:null})};d.$38=function(a){a=a?a.onCommentsRendered:void 0;d.$56("forward",a)};d.$39=function(a){a=a?a.onCommentsRendered:void 0;d.$56("backward",a)};d.$57=function(a){__p&&__p();var b=a.onComplete,c=a.viewOption;a=d.props;var e=a.depth,f=a.setViewOption;if(e!==0){b&&b(null);return}var g=!1;d.$20(function(a){if(m.isListLoading({depth:e,state:a}))return null;g=!0;return n.requestRefetchList({args:{depth:e},state:a})},function(a){g?f({onComplete:b,viewOption:c}):b&&b(null)})};d.$58=function(a){a=a.focusComposer;var b=d.props,c=b.depth;b=b.totalCount;var e=d.state.listState;!m.isListExpanded({depth:c,state:e})?d.$21({focusComposer:a,scrollToComposer:!1}):b>0&&m.getVisibleCommentsCount({depth:0,state:e})===0?d.$38():d.$19()};d.Actions={collapseList:d.$19,expandList:d.$21,loadNewerComments:d.$39,loadOlderComments:d.$38,setViewOption:d.$57,toggleList:d.$58};d.$2=b("debounce")(b("UFI2CommentsConfig").paginationPrefetchingStrategy==="no_prefetching"?b("emptyFunction"):function(){return d.$3("forward")},b("UFI2CommentsConfig").firstPagePreloadDelay,babelHelpers.assertThisInitialized(d),!0);d.$4.addSubscriptions(d.$2);return d}var d=a.prototype;d.componentWillUnmount=function(){this.$4.release(),this.$5=[]};d.$15=function(){__p&&__p();var a=this.props.depth,c=this.state.listState;c=a===0&&!m.isListLoading({depth:a,state:c});a=a!==0;var d=this.$6;if(this.$10===!0&&d!=null&&(c||a)){this.$10=!1;c=d.getElementToScrollTo();a=this.$14;if(a!=null){this.$14=null;b("scrollIntoView")(a,{behavior:"smooth",onScrollComplete:function(){d.focus()},verticalAlign:"center"});return}a=this.$11;this.$11=!1;if(a===!1){d.focus();return}if(c==null)return;if(c instanceof Text){b("FBLogger")("ufi2").mustfix("The composer is a Text node! I don't know what happened but this is UNACCEPTABLE, we found this out because we were trying to scroll to this component. You can look into and possibly fix this issue by asserting the composerRef on CometUFICommentList is being set correctly");d.focus();return}b("scrollIntoView")(c,{behavior:"smooth",onScrollComplete:function(){return d.focus()},verticalAlign:"center"})}};d.$16=function(a,b){var c=this.$8.get(a)||[];c.push(b);this.$8.set(a,c)};d.$3=function(a){var b=this.props,c=b.connectionPageInfo.pageSize,d=b.depth,e=b.fetchComments;b=b.totalCount;var f=this.state.listState;if(!m.canFetchInDirection({depth:d,direction:a,state:f,totalCount:b}))return;b=m.getCountForFetch({depth:d,direction:a,pageSize:c,state:f});if(b==null)return;e({count:b,direction:a,onCommentsFetched:this.$22})};d.$31=function(a){var b=this.props,c=b.depth,d=b.environment,e=b.totalCount;b=b.viewOption;var f=this.state.listState;return{Selectors:m,depth:c,direction:a,environment:d,listState:f,totalCount:e,viewOption:b}};d.$37=function(a){var b=this,c=this.props,d=c.connectionPageInfo.pageSize,e=c.depth,f=c.feedback,g=c.totalCount;c=c.viewOption;var h=this.state.listState,i=a==="forward"?this.$38:this.$39;return{Selectors:m,depth:e,direction:a,listState:h,loadMoreComments:i,onMouseEnter:function(){return b.$40(a)},pageSize:d,summaryTotalNumComments:(h=(e=f.comment_count)==null?void 0:e.total_count)!=null?h:0,totalCount:g,viewOption:c}};d.$40=function(a){b("UFI2CommentsConfig").paginationPrefetchingStrategy==="prefetch_enter_pager_1000ms_list"&&this.$3(a)};d.$50=function(a){var b=this.$6;b!=null?b.execCommand({__type:"SetReplyAssociation",commentAssociatedWithReply:a}):(this.$1=a,this.$13=!0)};d.$51=function(){var a=this.$6;a!=null?a.execCommand({__type:"SetReplyClicked"}):this.$12=!0};d.$36=function(){__p&&__p();var a=this;this.$54=this.$54.filter(function(b){var c=b.commentID,d=b.scrollToComposer;b=b.scrollToNode;c=a.$9[c];if(c!=null){c.$21({focusComposer:!0,scrollToComposer:d,scrollToNode:b});return!1}return!0})};d.$56=function(a,c){__p&&__p();var d=this,e=this.props,f=e.connectionPageInfo.pageSize,g=e.depth,h=e.fetchComments,i=!1;this.$20(function(c){var d=m.isPagerLoading({depth:g,direction:a,state:c})||g===0&&m.isListLoading({depth:g,state:c})||g!==0&&m.isRepliesExpanderLoading({depth:g,state:c});if(d)return null;d=g===0?n.requestCommentsPage({args:{depth:0,direction:a,pageSize:f},state:c}):n.requestCommentsPage({args:{depth:g,direction:a,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies,pageSize:f},state:c});i=m.isPagerLoading({depth:g,direction:a,state:d});return d},function(b){if(!i){c&&c();return}b=m.getCountForFetch({depth:g,direction:a,pageSize:f,state:b});if(b==null)return;c!=null&&d.$16(a,c);h({count:b,direction:a,onCommentsFetched:d.$22})})};d.$49=function(a,c){var d=a.authorId,e=a.authorIsWeakReference,f=a.authorName;a=a.authorType;c.execCommand({__type:"PrefillMention",mentionableEntity:new(b("SearchableEntry"))({auxiliaryData:{authorativePerson:void 0,connectedPage:void 0,disableAutosuggest:void 0,indexRank:void 0,renderType:e?"non_member":"member",verified:void 0,workForeignEntity:void 0,workUser:void 0},title:f,type:a==="User"?"user":"non_user",uniqueID:d})})};d.$46=function(a){__p&&__p();var b=this.$8.get(a)||[];for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e()}this.$8["delete"](a)};d.$20=function(a,b){var c=this;this.setState(function(b){b=a(b.listState);return!b?null:{listState:b}},function(){return b&&b(c.state.listState)})};d.render=function(){var a=this.props,b=a.children,c=a.commentParent,d=a.depth,e=a.environment,f=a.getComment,g=a.isInitiallyExpanded,h=a.replyViewOption,i=a.totalCount;a=a.viewOption;var j=this.state.listState;e={Actions:this.Actions,Selectors:m,addReplyToCommentCallback:this.$17,clearReplyToCommentCallback:this.$18,environment:e,getComment:f,getCommentEditorProps:this.$24,getCommentProps:this.$25,getComposerProps:this.$28,getFilterWarningPropsForNewerComments:this.$33,getFilterWarningPropsForOlderComments:this.$32,getHiddenCommentsPlaceholderProps:this.$34,getNestedCommentsListProps:this.$35,getPagerPropsForNewerComments:this.$42,getPagerPropsForOlderComments:this.$41,getPaginationProgressProps:this.$43,getTotalRepliesCountForComment:this.$53,isInitiallyExpanded:g,isReplyComposerVisibleForComment:this.$52,listState:j,onCommentsListMouseEnter:this.$47,onCommentsListMouseLeave:this.$48,replyViewOption:h,totalCount:i,viewOption:a};f=d===0?babelHelpers["extends"]({},e,{depth:0}):babelHelpers["extends"]({},e,{commentParent:c,depth:d,getRepliesCollapserProps:this.$44,getRepliesExpanderProps:this.$45});return b(f)};return a}(b("React").PureComponent);p.displayName="CometUFICommentListInternal";p.getDerivedStateFromProps=c;function a(a){__p&&__p();var c=a.children,d=a.commentParent,e=a.depth,f=e===void 0?0:e,g=a.displayCommentsContext;e=a.fallback;var k=a.feedback,l=a.feedbackSource,m=a.feedLocation,n=a.focusCommentID,o=a.listRef,q=a.topLevelFeedback,r=a.topLevelViewOption,s=a.useDefaultActor;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","commentParent","depth","displayCommentsContext","fallback","feedback","feedbackSource","feedLocation","focusCommentID","listRef","topLevelFeedback","topLevelViewOption","useDefaultActor"]);var t=j(),u=i(h!==void 0?h:h=b("CometUFICommentList_feedback.graphql"),k);if(f!==0&&q==null){b("recoverableViolation")("CometUFICommentList: topLevelFeedback is required to render a replies list","ufi2");return null}return b("React").jsx(b("CometUFICommentsProvider.react"),babelHelpers["extends"]({depth:f,displayCommentsContext:g,fallback:e,feedLocation:m,feedback:u,feedbackSource:l,focusCommentID:n,topLevelFeedback:q,topLevelViewOption:r,useDefaultActor:s},a,{children:function(a){return b("React").createElement(p,babelHelpers["extends"]({},a,{children:c,commentParent:d,depth:f,displayCommentsContext:g,environment:t,feedLocation:m,feedback:u,feedbackSource:l,focusCommentID:n,key:[l,n,(a=u.id)!=null?a:""].join("_"),ref:o,topLevelFeedback:q,useDefaultActor:s}))}}))}e.exports=a}),null);