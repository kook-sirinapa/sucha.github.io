if (self.CavalryLogger) { CavalryLogger.start_js(["3y+wB"]); }

__d("UFIThreadedFacecastCommentsControls.react",["ix","cx","fbt","Image.react","React","ShimButton.react","UFISharedDispatcher","UFIStoryAction","XUIText.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=this.props.newCommentCount>0?b("React").jsx(b("XUIText.react"),{className:"_zsl",size:"body3",color:"white",children:this.props.newCommentCount}):null;return b("React").jsxs("div",{className:"_6ew3",children:[b("React").jsxs(b("ShimButton.react"),{className:"_6wjz",onClick:function(){return b("UFISharedDispatcher").dispatch(b("UFIStoryAction").hideFacecastReplies(a.props.contextArgs,!0))},children:[b("React").jsx(b("Image.react"),{className:"_zuf",src:g("499009")}),c]}),b("React").jsx(b("XUIText.react"),{className:"_zug",size:"body1",color:"placeholder",weight:"bold",children:this.props.commentAuthorName!=null?i._("\u0e01\u0e33\u0e25\u0e31\u0e07\u0e15\u0e2d\u0e1a\u0e01\u0e25\u0e31\u0e1a {name}",[i._param("name",this.props.commentAuthorName)]):i._("\u0e01\u0e33\u0e25\u0e31\u0e07\u0e15\u0e2d\u0e1a\u0e04\u0e27\u0e32\u0e21\u0e04\u0e34\u0e14\u0e40\u0e2b\u0e47\u0e19")})]})};return c}(b("React").Component);e.exports=a}),null);
__d("UFIThreadedFacecastCommentsControlsContainer.react",["FluxContainer","React","ShortProfiles","SubscriptionsHandler","UFICentralUpdates","UFIComments","UFIThreadedFacecastCommentsControls.react","UFIThreadedFacecastCommentsStore","UFIToplevelStreamedCommentList"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("UFIThreadedFacecastCommentsStore")]};c.calculateState=function(a,c){var d=b("UFIThreadedFacecastCommentsStore").getCommentID(c.contextArgs.instanceid),e=d!=null?b("UFIComments").getComment(d):null;e=e!=null?b("ShortProfiles").getNow(e.author):null;e=e!=null?(e=e)!=null?e.firstName:e:null;var f=b("UFIToplevelStreamedCommentList").getExistingCommentList(c.contextArgs.ftentidentifier,c.contextArgs.islivestreaming===!0?b("UFIToplevelStreamedCommentList").GLOBAL_ID:c.contextArgs.instanceid);f=f?f.getAddedCommentCountForUnseenCounter():0;var g,h;d=d!=null;a==null||!a.isInReplyMode&&d?(g=f,h=0):(g=a.initialCommentCount,h=f-g>=0?f-g:0);return{isInReplyMode:d,isReplyModeLoaded:b("UFIThreadedFacecastCommentsStore").getIsLoaded(c.contextArgs.instanceid),commentAuthorName:e,initialCommentCount:g,newCommentCount:h}};var d=c.prototype;d.componentDidMount=function(){this.setupSubscriptions()};d.componentDidUpdate=function(){this.setupSubscriptions()};d.componentWillUnmount=function(){this.closeSubscriptions()};d.setupSubscriptions=function(){var a=this;this.closeSubscriptions();this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("UFICentralUpdates").subscribe("comments-updated",function(b){return a.setState(function(a,b){return c.calculateState(a,b)})}))};d.closeSubscriptions=function(){var a=this.$1;if(a==null)return;a.release();this.$1=null};d.render=function(){return!this.state.isInReplyMode||!this.state.isReplyModeLoaded?null:b("React").jsx(b("UFIThreadedFacecastCommentsControls.react"),{commentAuthorName:this.state.commentAuthorName,newCommentCount:this.state.newCommentCount,contextArgs:this.props.contextArgs})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);